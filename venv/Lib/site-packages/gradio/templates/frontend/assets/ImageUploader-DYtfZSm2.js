import{I as Ze,C as xe}from"./Index-HnsngA2K.js";import{B as et}from"./BlockLabel-du95yTCe.js";import{I as tt}from"./Image-Bsh8Umrh.js";import{W as nt,S as lt}from"./SelectSource-CUOWPNxy.js";import{g as it}from"./utils-Gtzs_Zla.js";import{D as Ke}from"./DropdownArrow-1sPRpZp8.js";import{p as rt}from"./index-DfiasXCI.js";import{f as ot}from"./Button-DHuQQqcr.js";import{U as at}from"./Upload-CsKoepC3.js";/* empty css                                                   */import{I as st}from"./Image-CI3yPJk1.js";const{SvelteComponent:ct,append:Te,attr:T,detach:ut,init:_t,insert:ft,noop:ke,safe_not_equal:dt,svg_element:$e}=window.__gradio__svelte__internal;function mt(i){let e,t,n;return{c(){e=$e("svg"),t=$e("path"),n=$e("circle"),T(t,"d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"),T(n,"cx","12"),T(n,"cy","13"),T(n,"r","4"),T(e,"xmlns","http://www.w3.org/2000/svg"),T(e,"width","100%"),T(e,"height","100%"),T(e,"viewBox","0 0 24 24"),T(e,"fill","none"),T(e,"stroke","currentColor"),T(e,"stroke-width","1.5"),T(e,"stroke-linecap","round"),T(e,"stroke-linejoin","round"),T(e,"class","feather feather-camera")},m(l,o){ft(l,e,o),Te(e,t),Te(e,n)},p:ke,i:ke,o:ke,d(l){l&&ut(e)}}}class gt extends ct{constructor(e){super(),_t(this,e,null,mt,dt,{})}}const{SvelteComponent:pt,append:ht,attr:O,detach:bt,init:vt,insert:wt,noop:Ie,safe_not_equal:kt,svg_element:Ue}=window.__gradio__svelte__internal;function $t(i){let e,t;return{c(){e=Ue("svg"),t=Ue("circle"),O(t,"cx","12"),O(t,"cy","12"),O(t,"r","10"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"width","100%"),O(e,"height","100%"),O(e,"viewBox","0 0 24 24"),O(e,"stroke-width","1.5"),O(e,"stroke-linecap","round"),O(e,"stroke-linejoin","round"),O(e,"class","feather feather-circle")},m(n,l){wt(n,e,l),ht(e,t)},p:Ie,i:Ie,o:Ie,d(n){n&&bt(e)}}}class It extends pt{constructor(e){super(),vt(this,e,null,$t,kt,{})}}const{SvelteComponent:Ct,append:yt,attr:U,detach:qt,init:St,insert:Dt,noop:Ce,safe_not_equal:Et,svg_element:je}=window.__gradio__svelte__internal;function Wt(i){let e,t;return{c(){e=je("svg"),t=je("rect"),U(t,"x","3"),U(t,"y","3"),U(t,"width","18"),U(t,"height","18"),U(t,"rx","2"),U(t,"ry","2"),U(e,"xmlns","http://www.w3.org/2000/svg"),U(e,"width","100%"),U(e,"height","100%"),U(e,"viewBox","0 0 24 24"),U(e,"stroke-width","1.5"),U(e,"stroke-linecap","round"),U(e,"stroke-linejoin","round"),U(e,"class","feather feather-square")},m(n,l){Dt(n,e,l),yt(e,t)},p:Ce,i:Ce,o:Ce,d(n){n&&qt(e)}}}class zt extends Ct{constructor(e){super(),St(this,e,null,Wt,Et,{})}}const{SvelteComponent:Mt,append:ie,attr:ye,create_component:Bt,destroy_component:Rt,detach:Tt,element:qe,init:Ut,insert:jt,listen:Nt,mount_component:Lt,noop:At,safe_not_equal:Ht,set_style:Ot,space:Pt,text:Ft,transition_in:Vt,transition_out:Gt}=window.__gradio__svelte__internal,{createEventDispatcher:Jt}=window.__gradio__svelte__internal;function Kt(i){let e,t,n,l,o,r="Click to Access Webcam",f,s,g,a;return l=new nt({}),{c(){e=qe("button"),t=qe("div"),n=qe("span"),Bt(l.$$.fragment),o=Pt(),f=Ft(r),ye(n,"class","icon-wrap svelte-qbrfs"),ye(t,"class","wrap svelte-qbrfs"),ye(e,"class","svelte-qbrfs"),Ot(e,"height","100%")},m(u,w){jt(u,e,w),ie(e,t),ie(t,n),Lt(l,n,null),ie(t,o),ie(t,f),s=!0,g||(a=Nt(e,"click",i[1]),g=!0)},p:At,i(u){s||(Vt(l.$$.fragment,u),s=!0)},o(u){Gt(l.$$.fragment,u),s=!1},d(u){u&&Tt(e),Rt(l),g=!1,a()}}}function Qt(i){const e=Jt();return[e,()=>e("click")]}class Xt extends Mt{constructor(e){super(),Ut(this,e,Qt,Kt,Ht,{})}}function Yt(){return navigator.mediaDevices.enumerateDevices()}function Zt(i,e){e.srcObject=i,e.muted=!0,e.play()}async function Ne(i,e,t){const n={width:{ideal:1920},height:{ideal:1440}},l={video:t?{deviceId:{exact:t},...n}:n,audio:i};return navigator.mediaDevices.getUserMedia(l).then(o=>(Zt(o,e),o))}function xt(i){return i.filter(t=>t.kind==="videoinput")}const{SvelteComponent:en,action_destroyer:tn,add_render_callback:nn,append:F,attr:C,binding_callbacks:ln,check_outros:ee,create_component:Q,create_in_transition:rn,destroy_component:X,destroy_each:on,detach:N,element:A,empty:Me,ensure_array_like:Le,flush:V,group_outros:te,init:an,insert:L,listen:_e,mount_component:Y,noop:Be,run_all:sn,safe_not_equal:cn,set_data:Qe,set_input_value:De,space:ne,stop_propagation:un,text:Xe,toggle_class:re,transition_in:S,transition_out:z}=window.__gradio__svelte__internal,{createEventDispatcher:_n,onMount:fn}=window.__gradio__svelte__internal;function Ae(i,e,t){const n=i.slice();return n[31]=e[t],n}function dn(i){let e,t,n,l,o,r,f,s,g,a,u;const w=[pn,gn],I=[];function R(p,k){return p[1]==="video"||p[0]?0:1}n=R(i),l=I[n]=w[n](i);let d=!i[8]&&He(i),v=i[10]&&i[7]&&Oe(i);return{c(){e=A("div"),t=A("button"),l.c(),r=ne(),d&&d.c(),f=ne(),v&&v.c(),s=Me(),C(t,"aria-label",o=i[1]==="image"?"capture photo":"start recording"),C(t,"class","svelte-1aa1mud"),C(e,"class","button-wrap svelte-1aa1mud")},m(p,k){L(p,e,k),F(e,t),I[n].m(t,null),F(e,r),d&&d.m(e,null),L(p,f,k),v&&v.m(p,k),L(p,s,k),g=!0,a||(u=_e(t,"click",i[13]),a=!0)},p(p,k){let $=n;n=R(p),n===$?I[n].p(p,k):(te(),z(I[$],1,1,()=>{I[$]=null}),ee(),l=I[n],l?l.p(p,k):(l=I[n]=w[n](p),l.c()),S(l,1),l.m(t,null)),(!g||k[0]&2&&o!==(o=p[1]==="image"?"capture photo":"start recording"))&&C(t,"aria-label",o),p[8]?d&&(te(),z(d,1,1,()=>{d=null}),ee()):d?(d.p(p,k),k[0]&256&&S(d,1)):(d=He(p),d.c(),S(d,1),d.m(e,null)),p[10]&&p[7]?v?(v.p(p,k),k[0]&1152&&S(v,1)):(v=Oe(p),v.c(),S(v,1),v.m(s.parentNode,s)):v&&(te(),z(v,1,1,()=>{v=null}),ee())},i(p){g||(S(l),S(d),S(v),g=!0)},o(p){z(l),z(d),z(v),g=!1},d(p){p&&(N(e),N(f),N(s)),I[n].d(),d&&d.d(),v&&v.d(p),a=!1,u()}}}function mn(i){let e,t,n,l;return t=new Xt({}),t.$on("click",i[20]),{c(){e=A("div"),Q(t.$$.fragment),C(e,"title","grant webcam access")},m(o,r){L(o,e,r),Y(t,e,null),l=!0},p:Be,i(o){l||(S(t.$$.fragment,o),o&&(n||nn(()=>{n=rn(e,ot,{delay:100,duration:200}),n.start()})),l=!0)},o(o){z(t.$$.fragment,o),l=!1},d(o){o&&N(e),X(t)}}}function gn(i){let e,t,n;return t=new gt({}),{c(){e=A("div"),Q(t.$$.fragment),C(e,"class","icon svelte-1aa1mud"),C(e,"title","capture photo")},m(l,o){L(l,e,o),Y(t,e,null),n=!0},p:Be,i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){l&&N(e),X(t)}}}function pn(i){let e,t,n,l;const o=[bn,hn],r=[];function f(s,g){return s[8]?0:1}return e=f(i),t=r[e]=o[e](i),{c(){t.c(),n=Me()},m(s,g){r[e].m(s,g),L(s,n,g),l=!0},p(s,g){let a=e;e=f(s),e!==a&&(te(),z(r[a],1,1,()=>{r[a]=null}),ee(),t=r[e],t||(t=r[e]=o[e](s),t.c()),S(t,1),t.m(n.parentNode,n))},i(s){l||(S(t),l=!0)},o(s){z(t),l=!1},d(s){s&&N(n),r[e].d(s)}}}function hn(i){let e,t,n;return t=new It({}),{c(){e=A("div"),Q(t.$$.fragment),C(e,"class","icon red svelte-1aa1mud"),C(e,"title","start recording")},m(l,o){L(l,e,o),Y(t,e,null),n=!0},i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){l&&N(e),X(t)}}}function bn(i){let e,t,n;return t=new zt({}),{c(){e=A("div"),Q(t.$$.fragment),C(e,"class","icon red svelte-1aa1mud"),C(e,"title","stop recording")},m(l,o){L(l,e,o),Y(t,e,null),n=!0},i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){l&&N(e),X(t)}}}function He(i){let e,t,n,l,o;return t=new Ke({}),{c(){e=A("button"),Q(t.$$.fragment),C(e,"class","icon svelte-1aa1mud"),C(e,"aria-label","select input source")},m(r,f){L(r,e,f),Y(t,e,null),n=!0,l||(o=_e(e,"click",i[21]),l=!0)},p:Be,i(r){n||(S(t.$$.fragment,r),n=!0)},o(r){z(t.$$.fragment,r),n=!1},d(r){r&&N(e),X(t),l=!1,o()}}}function Oe(i){let e,t,n,l,o,r,f;n=new Ke({});function s(u,w){return u[6].length===0?wn:vn}let g=s(i),a=g(i);return{c(){e=A("select"),t=A("button"),Q(n.$$.fragment),l=ne(),a.c(),C(t,"class","inset-icon svelte-1aa1mud"),C(e,"class","select-wrap svelte-1aa1mud"),C(e,"aria-label","select source")},m(u,w){L(u,e,w),F(e,t),Y(n,t,null),F(t,l),a.m(e,null),o=!0,r||(f=[_e(t,"click",un(i[22])),tn(Re.call(null,e,i[14])),_e(e,"change",i[11])],r=!0)},p(u,w){g===(g=s(u))&&a?a.p(u,w):(a.d(1),a=g(u),a&&(a.c(),a.m(e,null)))},i(u){o||(S(n.$$.fragment,u),o=!0)},o(u){z(n.$$.fragment,u),o=!1},d(u){u&&N(e),X(n),a.d(),r=!1,sn(f)}}}function vn(i){let e,t=Le(i[6]),n=[];for(let l=0;l<t.length;l+=1)n[l]=Pe(Ae(i,t,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=Me()},m(l,o){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(l,o);L(l,e,o)},p(l,o){if(o[0]&192){t=Le(l[6]);let r;for(r=0;r<t.length;r+=1){const f=Ae(l,t,r);n[r]?n[r].p(f,o):(n[r]=Pe(f),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(l){l&&N(e),on(n,l)}}}function wn(i){let e,t=i[3]("common.no_devices")+"",n;return{c(){e=A("option"),n=Xe(t),e.__value="",De(e,e.__value),C(e,"class","svelte-1aa1mud")},m(l,o){L(l,e,o),F(e,n)},p(l,o){o[0]&8&&t!==(t=l[3]("common.no_devices")+"")&&Qe(n,t)},d(l){l&&N(e)}}}function Pe(i){let e,t=i[31].label+"",n,l,o,r;return{c(){e=A("option"),n=Xe(t),l=ne(),e.__value=o=i[31].deviceId,De(e,e.__value),e.selected=r=i[7].deviceId===i[31].deviceId,C(e,"class","svelte-1aa1mud")},m(f,s){L(f,e,s),F(e,n),F(e,l)},p(f,s){s[0]&64&&t!==(t=f[31].label+"")&&Qe(n,t),s[0]&64&&o!==(o=f[31].deviceId)&&(e.__value=o,De(e,e.__value)),s[0]&192&&r!==(r=f[7].deviceId===f[31].deviceId)&&(e.selected=r)},d(f){f&&N(e)}}}function kn(i){let e,t,n,l,o,r;const f=[mn,dn],s=[];function g(a,u){return a[9]?1:0}return l=g(i),o=s[l]=f[l](i),{c(){e=A("div"),t=A("video"),n=ne(),o.c(),C(t,"class","svelte-1aa1mud"),re(t,"flip",i[2]),re(t,"hide",!i[9]),C(e,"class","wrap svelte-1aa1mud")},m(a,u){L(a,e,u),F(e,t),i[19](t),F(e,n),s[l].m(e,null),r=!0},p(a,u){(!r||u[0]&4)&&re(t,"flip",a[2]),(!r||u[0]&512)&&re(t,"hide",!a[9]);let w=l;l=g(a),l===w?s[l].p(a,u):(te(),z(s[w],1,1,()=>{s[w]=null}),ee(),o=s[l],o?o.p(a,u):(o=s[l]=f[l](a),o.c()),S(o,1),o.m(e,null))},i(a){r||(S(o),r=!0)},o(a){z(o),r=!1},d(a){a&&N(e),i[19](null),s[l].d()}}}function Re(i,e){const t=n=>{i&&!i.contains(n.target)&&!n.defaultPrevented&&e(n)};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function $n(i,e,t){let n,l=[],o=null,r,{streaming:f=!1}=e,{pending:s=!1}=e,{root:g=""}=e,{mode:a="image"}=e,{mirror_webcam:u}=e,{include_audio:w}=e,{i18n:I}=e,{upload:R}=e;const d=_n();fn(()=>r=document.createElement("canvas"));const v=async m=>{const P=m.target.value;await Ne(w,n,P).then(async Z=>{E=Z,t(7,o=l.find(x=>x.deviceId===P)||null),t(10,H=!1)})};async function p(){try{Ne(w,n).then(async m=>{t(9,W=!0),t(6,l=await Yt()),E=m}).then(()=>xt(l)).then(m=>{t(6,l=m);const M=E.getTracks().map(P=>P.getSettings()?.deviceId)[0];t(7,o=M&&m.find(P=>P.deviceId===M)||l[0])}),(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&d("error",I("image.no_webcam_support"))}catch(m){if(m instanceof DOMException&&m.name=="NotAllowedError")d("error",I("image.allow_webcam_access"));else throw m}}function k(){var m=r.getContext("2d");(!f||f&&$)&&n.videoWidth&&n.videoHeight&&(r.width=n.videoWidth,r.height=n.videoHeight,m.drawImage(n,0,0,n.videoWidth,n.videoHeight),u&&(m.scale(-1,1),m.drawImage(n,-n.videoWidth,0)),r.toBlob(M=>{d(f?"stream":"capture",M)},"image/png",.8))}let $=!1,D=[],E,b,_;function h(){if($){_.stop();let m=new Blob(D,{type:b}),M=new FileReader;M.onload=async function(P){if(P.target){let Z=new File([m],"sample."+b.substring(6));const x=await rt([Z]);let we=(await R(x,g))?.filter(Boolean)[0];d("capture",we),d("stop_recording")}},M.readAsDataURL(m)}else{d("start_recording"),D=[];let m=["video/webm","video/mp4"];for(let M of m)if(MediaRecorder.isTypeSupported(M)){b=M;break}if(b===null){console.error("No supported MediaRecorder mimeType");return}_=new MediaRecorder(E,{mimeType:b}),_.addEventListener("dataavailable",function(M){D.push(M.data)}),_.start(200)}t(8,$=!$)}let W=!1;function y(){a==="image"&&f&&t(8,$=!$),a==="image"?k():h(),!$&&E&&(E.getTracks().forEach(m=>m.stop()),t(5,n.srcObject=null,n),t(9,W=!1))}f&&a==="image"&&window.setInterval(()=>{n&&!s&&k()},500);let H=!1;function ge(m){m.preventDefault(),m.stopPropagation(),t(10,H=!1)}function pe(m){ln[m?"unshift":"push"](()=>{n=m,t(5,n)})}const he=async()=>p(),be=()=>t(10,H=!0),ve=()=>t(10,H=!1);return i.$$set=m=>{"streaming"in m&&t(0,f=m.streaming),"pending"in m&&t(15,s=m.pending),"root"in m&&t(16,g=m.root),"mode"in m&&t(1,a=m.mode),"mirror_webcam"in m&&t(2,u=m.mirror_webcam),"include_audio"in m&&t(17,w=m.include_audio),"i18n"in m&&t(3,I=m.i18n),"upload"in m&&t(18,R=m.upload)},[f,a,u,I,Re,n,l,o,$,W,H,v,p,y,ge,s,g,w,R,pe,he,be,ve]}class In extends en{constructor(e){super(),an(this,e,$n,kn,cn,{streaming:0,pending:15,root:16,mode:1,mirror_webcam:2,include_audio:17,i18n:3,upload:18,click_outside:4},null,[-1,-1])}get streaming(){return this.$$.ctx[0]}set streaming(e){this.$$set({streaming:e}),V()}get pending(){return this.$$.ctx[15]}set pending(e){this.$$set({pending:e}),V()}get root(){return this.$$.ctx[16]}set root(e){this.$$set({root:e}),V()}get mode(){return this.$$.ctx[1]}set mode(e){this.$$set({mode:e}),V()}get mirror_webcam(){return this.$$.ctx[2]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),V()}get include_audio(){return this.$$.ctx[17]}set include_audio(e){this.$$set({include_audio:e}),V()}get i18n(){return this.$$.ctx[3]}set i18n(e){this.$$set({i18n:e}),V()}get upload(){return this.$$.ctx[18]}set upload(e){this.$$set({upload:e}),V()}get click_outside(){return Re}}const Cn=In,{SvelteComponent:yn,attr:qn,create_component:Sn,destroy_component:Dn,detach:En,element:Wn,init:zn,insert:Mn,mount_component:Bn,noop:Rn,safe_not_equal:Tn,transition_in:Un,transition_out:jn}=window.__gradio__svelte__internal,{createEventDispatcher:Nn}=window.__gradio__svelte__internal;function Ln(i){let e,t,n;return t=new Ze({props:{Icon:xe,label:"Remove Image"}}),t.$on("click",i[1]),{c(){e=Wn("div"),Sn(t.$$.fragment),qn(e,"class","svelte-s6ybro")},m(l,o){Mn(l,e,o),Bn(t,e,null),n=!0},p:Rn,i(l){n||(Un(t.$$.fragment,l),n=!0)},o(l){jn(t.$$.fragment,l),n=!1},d(l){l&&En(e),Dn(t)}}}function An(i){const e=Nn();return[e,n=>{e("remove_image"),n.stopPropagation()}]}class Hn extends yn{constructor(e){super(),zn(this,e,An,Ln,Tn,{})}}const{SvelteComponent:On,add_flush_callback:Ee,append:oe,attr:se,bind:We,binding_callbacks:fe,bubble:Se,check_outros:ce,create_component:G,create_slot:Pn,destroy_component:J,detach:de,element:ze,empty:Fn,flush:j,get_all_dirty_from_scope:Vn,get_slot_changes:Gn,group_outros:ue,init:Jn,insert:me,listen:Kn,mount_component:K,noop:Qn,safe_not_equal:Xn,space:ae,toggle_class:Fe,transition_in:q,transition_out:B,update_slot_base:Yn}=window.__gradio__svelte__internal,{createEventDispatcher:Zn,tick:xn}=window.__gradio__svelte__internal;function Ve(i){let e,t;return e=new Hn({}),e.$on("remove_image",i[25]),{c(){G(e.$$.fragment)},m(n,l){K(e,n,l),t=!0},p:Qn,i(n){t||(q(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Ge(i){let e;const t=i[24].default,n=Pn(t,i,i[36],null);return{c(){n&&n.c()},m(l,o){n&&n.m(l,o),e=!0},p(l,o){n&&n.p&&(!e||o[1]&32)&&Yn(n,t,l,l[36],e?Gn(t,l[36],o,null):Vn(l[36]),null)},i(l){e||(q(n,l),e=!0)},o(l){B(n,l),e=!1},d(l){n&&n.d(l)}}}function el(i){let e,t,n=i[1]===null&&Ge(i);return{c(){n&&n.c(),e=Fn()},m(l,o){n&&n.m(l,o),me(l,e,o),t=!0},p(l,o){l[1]===null?n?(n.p(l,o),o[0]&2&&q(n,1)):(n=Ge(l),n.c(),q(n,1),n.m(e.parentNode,e)):n&&(ue(),B(n,1,1,()=>{n=null}),ce())},i(l){t||(q(n),t=!0)},o(l){B(n),t=!1},d(l){l&&de(e),n&&n.d(l)}}}function tl(i){let e,t,n,l,o;return t=new st({props:{src:i[1].url,alt:i[1].alt_text}}),{c(){e=ze("div"),G(t.$$.fragment),se(e,"class","image-frame svelte-rrgd5g"),Fe(e,"selectable",i[7])},m(r,f){me(r,e,f),K(t,e,null),n=!0,l||(o=Kn(e,"click",i[21]),l=!0)},p(r,f){const s={};f[0]&2&&(s.src=r[1].url),f[0]&2&&(s.alt=r[1].alt_text),t.$set(s),(!n||f[0]&128)&&Fe(e,"selectable",r[7])},i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){r&&de(e),J(t),l=!1,o()}}}function nl(i){let e,t;return e=new Cn({props:{root:i[8],mirror_webcam:i[6],streaming:i[5],mode:"image",include_audio:!1,i18n:i[9],upload:i[11]}}),e.$on("capture",i[30]),e.$on("stream",i[31]),e.$on("error",i[32]),e.$on("drag",i[33]),e.$on("upload",i[34]),{c(){G(e.$$.fragment)},m(n,l){K(e,n,l),t=!0},p(n,l){const o={};l[0]&256&&(o.root=n[8]),l[0]&64&&(o.mirror_webcam=n[6]),l[0]&32&&(o.streaming=n[5]),l[0]&512&&(o.i18n=n[9]),l[0]&2048&&(o.upload=n[11]),e.$set(o)},i(n){t||(q(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Je(i){let e,t,n;function l(r){i[35](r)}let o={sources:i[4],handle_clear:i[18],handle_select:i[22]};return i[0]!==void 0&&(o.active_source=i[0]),e=new lt({props:o}),fe.push(()=>We(e,"active_source",l)),{c(){G(e.$$.fragment)},m(r,f){K(e,r,f),n=!0},p(r,f){const s={};f[0]&16&&(s.sources=r[4]),!t&&f[0]&1&&(t=!0,s.active_source=r[0],Ee(()=>t=!1)),e.$set(s)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function ll(i){let e,t,n,l,o,r,f,s,g,a,u,w,I=i[4].length>1||i[4].includes("clipboard"),R;e=new et({props:{show_label:i[3],Icon:tt,label:i[2]||"Image"}});let d=i[1]?.url&&!i[15]&&Ve(i);function v(_){i[27](_)}function p(_){i[28](_)}let k={hidden:i[1]!==null||i[0]==="webcam",filetype:i[0]==="clipboard"?"clipboard":"image/*",root:i[8],max_file_size:i[10],disable_click:!i[4].includes("upload"),upload:i[11],stream_handler:i[12],$$slots:{default:[el]},$$scope:{ctx:i}};i[13]!==void 0&&(k.uploading=i[13]),i[14]!==void 0&&(k.dragging=i[14]),r=new at({props:k}),i[26](r),fe.push(()=>We(r,"uploading",v)),fe.push(()=>We(r,"dragging",p)),r.$on("load",i[17]),r.$on("error",i[29]);const $=[nl,tl],D=[];function E(_,h){return _[0]==="webcam"&&(_[5]||!_[5]&&!_[1])?0:_[1]!==null&&!_[5]?1:-1}~(a=E(i))&&(u=D[a]=$[a](i));let b=I&&Je(i);return{c(){G(e.$$.fragment),t=ae(),n=ze("div"),d&&d.c(),l=ae(),o=ze("div"),G(r.$$.fragment),g=ae(),u&&u.c(),w=ae(),b&&b.c(),se(o,"class","upload-container svelte-rrgd5g"),se(n,"data-testid","image"),se(n,"class","image-container svelte-rrgd5g")},m(_,h){K(e,_,h),me(_,t,h),me(_,n,h),d&&d.m(n,null),oe(n,l),oe(n,o),K(r,o,null),oe(o,g),~a&&D[a].m(o,null),oe(n,w),b&&b.m(n,null),R=!0},p(_,h){const W={};h[0]&8&&(W.show_label=_[3]),h[0]&4&&(W.label=_[2]||"Image"),e.$set(W),_[1]?.url&&!_[15]?d?(d.p(_,h),h[0]&32770&&q(d,1)):(d=Ve(_),d.c(),q(d,1),d.m(n,l)):d&&(ue(),B(d,1,1,()=>{d=null}),ce());const y={};h[0]&3&&(y.hidden=_[1]!==null||_[0]==="webcam"),h[0]&1&&(y.filetype=_[0]==="clipboard"?"clipboard":"image/*"),h[0]&256&&(y.root=_[8]),h[0]&1024&&(y.max_file_size=_[10]),h[0]&16&&(y.disable_click=!_[4].includes("upload")),h[0]&2048&&(y.upload=_[11]),h[0]&4096&&(y.stream_handler=_[12]),h[0]&2|h[1]&32&&(y.$$scope={dirty:h,ctx:_}),!f&&h[0]&8192&&(f=!0,y.uploading=_[13],Ee(()=>f=!1)),!s&&h[0]&16384&&(s=!0,y.dragging=_[14],Ee(()=>s=!1)),r.$set(y);let H=a;a=E(_),a===H?~a&&D[a].p(_,h):(u&&(ue(),B(D[H],1,1,()=>{D[H]=null}),ce()),~a?(u=D[a],u?u.p(_,h):(u=D[a]=$[a](_),u.c()),q(u,1),u.m(o,null)):u=null),h[0]&16&&(I=_[4].length>1||_[4].includes("clipboard")),I?b?(b.p(_,h),h[0]&16&&q(b,1)):(b=Je(_),b.c(),q(b,1),b.m(n,null)):b&&(ue(),B(b,1,1,()=>{b=null}),ce())},i(_){R||(q(e.$$.fragment,_),q(d),q(r.$$.fragment,_),q(u),q(b),R=!0)},o(_){B(e.$$.fragment,_),B(d),B(r.$$.fragment,_),B(u),B(b),R=!1},d(_){_&&(de(t),de(n)),J(e,_),d&&d.d(),i[26](null),J(r),~a&&D[a].d(),b&&b.d()}}}function il(i,e,t){let n,{$$slots:l={},$$scope:o}=e,{value:r}=e,{label:f=void 0}=e,{show_label:s}=e,{sources:g=["upload","clipboard","webcam"]}=e,{streaming:a=!1}=e,{pending:u=!1}=e,{mirror_webcam:w}=e,{selectable:I=!1}=e,{root:R}=e,{i18n:d}=e,{max_file_size:v=null}=e,{upload:p}=e,{stream_handler:k}=e,$,D=!1,{active_source:E=null}=e;function b({detail:c}){t(1,r=c),W("upload")}function _(){t(1,r=null),W("clear"),W("change",null)}async function h(c){t(23,u=!0);const le=await $.load_files([new File([c],"webcam.png")]);t(1,r=le?.[0]||null),await xn(),W(a?"stream":"change"),t(23,u=!1)}const W=Zn();let y=!1;function H(c){let le=it(c);le&&W("select",{index:le,value:null})}async function ge(c){switch(c){case"clipboard":$.paste_clipboard();break}}const pe=()=>{t(1,r=null),W("clear")};function he(c){fe[c?"unshift":"push"](()=>{$=c,t(16,$)})}function be(c){D=c,t(13,D)}function ve(c){y=c,t(14,y)}function m(c){Se.call(this,i,c)}const M=c=>h(c.detail),P=c=>h(c.detail);function Z(c){Se.call(this,i,c)}function x(c){Se.call(this,i,c)}const we=c=>h(c.detail);function Ye(c){E=c,t(0,E),t(4,g)}return i.$$set=c=>{"value"in c&&t(1,r=c.value),"label"in c&&t(2,f=c.label),"show_label"in c&&t(3,s=c.show_label),"sources"in c&&t(4,g=c.sources),"streaming"in c&&t(5,a=c.streaming),"pending"in c&&t(23,u=c.pending),"mirror_webcam"in c&&t(6,w=c.mirror_webcam),"selectable"in c&&t(7,I=c.selectable),"root"in c&&t(8,R=c.root),"i18n"in c&&t(9,d=c.i18n),"max_file_size"in c&&t(10,v=c.max_file_size),"upload"in c&&t(11,p=c.upload),"stream_handler"in c&&t(12,k=c.stream_handler),"active_source"in c&&t(0,E=c.active_source),"$$scope"in c&&t(36,o=c.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&17&&!E&&g&&t(0,E=g[0]),i.$$.dirty[0]&33&&t(15,n=a&&E==="webcam"),i.$$.dirty[0]&40960&&D&&!n&&t(1,r=null),i.$$.dirty[0]&16384&&W("drag",y)},[E,r,f,s,g,a,w,I,R,d,v,p,k,D,y,n,$,b,_,h,W,H,ge,u,l,pe,he,be,ve,m,M,P,Z,x,we,Ye,o]}class rl extends On{constructor(e){super(),Jn(this,e,il,ll,Xn,{value:1,label:2,show_label:3,sources:4,streaming:5,pending:23,mirror_webcam:6,selectable:7,root:8,i18n:9,max_file_size:10,upload:11,stream_handler:12,active_source:0},null,[-1,-1])}get value(){return this.$$.ctx[1]}set value(e){this.$$set({value:e}),j()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),j()}get show_label(){return this.$$.ctx[3]}set show_label(e){this.$$set({show_label:e}),j()}get sources(){return this.$$.ctx[4]}set sources(e){this.$$set({sources:e}),j()}get streaming(){return this.$$.ctx[5]}set streaming(e){this.$$set({streaming:e}),j()}get pending(){return this.$$.ctx[23]}set pending(e){this.$$set({pending:e}),j()}get mirror_webcam(){return this.$$.ctx[6]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),j()}get selectable(){return this.$$.ctx[7]}set selectable(e){this.$$set({selectable:e}),j()}get root(){return this.$$.ctx[8]}set root(e){this.$$set({root:e}),j()}get i18n(){return this.$$.ctx[9]}set i18n(e){this.$$set({i18n:e}),j()}get max_file_size(){return this.$$.ctx[10]}set max_file_size(e){this.$$set({max_file_size:e}),j()}get upload(){return this.$$.ctx[11]}set upload(e){this.$$set({upload:e}),j()}get stream_handler(){return this.$$.ctx[12]}set stream_handler(e){this.$$set({stream_handler:e}),j()}get active_source(){return this.$$.ctx[0]}set active_source(e){this.$$set({active_source:e}),j()}}const hl=rl;export{hl as I,Cn as W};
//# sourceMappingURL=ImageUploader-DYtfZSm2.js.map
