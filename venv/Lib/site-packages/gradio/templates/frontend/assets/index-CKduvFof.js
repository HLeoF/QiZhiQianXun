const __vite__fileDeps=["./module-DzRpSqq1.js","./module-C-VadMaF.js","./Index-HnsngA2K.js","./index-DfiasXCI.js","./index-B3dShO5J.css","./Index-Ccnoqff9.css","./module-BA06XY8_.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{s as _t,W as sn,p as ct,a as it,A as rn,S as ln}from"./StaticAudio-D7N_h2hQ.js";import{_ as ft,p as an}from"./index-DfiasXCI.js";import{U as un}from"./Upload-CsKoepC3.js";import{M as Tt}from"./ModifyUpload-BQ2qugrc.js";import{S as Ut}from"./Index-HnsngA2K.js";import{B as _n}from"./BlockLabel-du95yTCe.js";import{M as cn}from"./Music-CDm0RGMk.js";import{S as fn}from"./SelectSource-CUOWPNxy.js";import{P as dn}from"./Trim-UKwaW4UI.js";import{f as oe}from"./Blocks-BW0LI6Mk.js";import{B as qt}from"./Button-DHuQQqcr.js";import{U as mn}from"./UploadText-CujAbmkt.js";import{default as yo}from"./Example-uQ8MuYg6.js";import"./Empty-B-q4dRI6.js";import"./ShareButton-D7_uro_U.js";import"./Download-DVtk-Jv3.js";import"./Undo-CpmTQw3B.js";import"./file-url-YFl-0Cl9.js";import"./DownloadLink-CVlM3uy0.js";import"./svelte/svelte.js";/* empty css                                                   */import"./Upload-Cp8Go_XF.js";function nt(n,e,t,i){return new(t||(t=Promise))(function(o,l){function s(c){try{a(i.next(c))}catch(r){l(r)}}function u(c){try{a(i.throw(c))}catch(r){l(r)}}function a(c){var r;c.done?o(c.value):(r=c.value,r instanceof t?r:new t(function(_){_(r)})).then(s,u)}a((i=i.apply(n,[])).next())})}class hn{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,i){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),i?.once){const o=()=>{this.removeEventListener(e,o),this.removeEventListener(e,t)};return this.addEventListener(e,o),o}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var i;(i=this.listeners[e])===null||i===void 0||i.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(i=>i(...t))}}class gn extends hn{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}}const bn=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Pe extends gn{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:(t=e.audioBitsPerSecond)!==null&&t!==void 0?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new Pe(e||{})}renderMicStream(e){const t=new AudioContext,i=t.createMediaStreamSource(e),o=t.createAnalyser();i.connect(o);const l=o.frequencyBinCount,s=new Float32Array(l),u=l/t.sampleRate;let a;const c=()=>{o.getFloatTimeDomainData(s),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[s],u)),a=requestAnimationFrame(c)};return c(),()=>{cancelAnimationFrame(a),i?.disconnect(),t?.close()}}startMic(e){return nt(this,void 0,void 0,function*(){let t;try{t=yield navigator.mediaDevices.getUserMedia({audio:!e?.deviceId||{deviceId:e.deviceId}})}catch(o){throw new Error("Error accessing the microphone: "+o.message)}const i=this.renderMicStream(t);return this.subscriptions.push(this.once("destroy",i)),this.stream=t,t})}stopMic(){this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(e){return nt(this,void 0,void 0,function*(){const t=this.stream||(yield this.startMic(e)),i=this.mediaRecorder||new MediaRecorder(t,{mimeType:this.options.mimeType||bn.find(l=>MediaRecorder.isTypeSupported(l)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=i,this.stopRecording();const o=[];i.ondataavailable=l=>{l.data.size>0&&o.push(l.data)},i.onstop=()=>{var l;const s=new Blob(o,{type:i.mimeType});this.emit("record-end",s),this.options.renderRecordedAudio!==!1&&((l=this.wavesurfer)===null||l===void 0||l.load(URL.createObjectURL(s)))},i.start(),this.emit("record-start")})}isRecording(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="recording"}isPaused(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="paused"}stopRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.stop())}pauseRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.pause(),this.emit("record-pause"))}resumeRecording(){var e;this.isPaused()&&((e=this.mediaRecorder)===null||e===void 0||e.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return nt(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(e=>e.filter(t=>t.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}const{SvelteComponent:pn,append:Ot,attr:dt,destroy_each:wn,detach:qe,element:st,empty:vn,ensure_array_like:mt,flush:ht,init:kn,insert:Oe,noop:gt,safe_not_equal:yn,set_data:Wt,set_input_value:ot,text:Nt}=window.__gradio__svelte__internal,{createEventDispatcher:Dn}=window.__gradio__svelte__internal;function bt(n,e,t){const i=n.slice();return i[3]=e[t],i}function Rn(n){let e,t=mt(n[0]),i=[];for(let o=0;o<t.length;o+=1)i[o]=pt(bt(n,t,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=vn()},m(o,l){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(o,l);Oe(o,e,l)},p(o,l){if(l&1){t=mt(o[0]);let s;for(s=0;s<t.length;s+=1){const u=bt(o,t,s);i[s]?i[s].p(u,l):(i[s]=pt(u),i[s].c(),i[s].m(e.parentNode,e))}for(;s<i.length;s+=1)i[s].d(1);i.length=t.length}},d(o){o&&qe(e),wn(i,o)}}}function Sn(n){let e,t=n[1]("audio.no_microphone")+"",i;return{c(){e=st("option"),i=Nt(t),e.__value="",ot(e,e.__value)},m(o,l){Oe(o,e,l),Ot(e,i)},p(o,l){l&2&&t!==(t=o[1]("audio.no_microphone")+"")&&Wt(i,t)},d(o){o&&qe(e)}}}function pt(n){let e,t=n[3].label+"",i,o;return{c(){e=st("option"),i=Nt(t),e.__value=o=n[3].deviceId,ot(e,e.__value)},m(l,s){Oe(l,e,s),Ot(e,i)},p(l,s){s&1&&t!==(t=l[3].label+"")&&Wt(i,t),s&1&&o!==(o=l[3].deviceId)&&(e.__value=o,ot(e,e.__value))},d(l){l&&qe(e)}}}function En(n){let e,t;function i(s,u){return s[0].length===0?Sn:Rn}let o=i(n),l=o(n);return{c(){e=st("select"),l.c(),dt(e,"class","mic-select svelte-1v4948z"),dt(e,"aria-label","Select input device"),e.disabled=t=n[0].length===0},m(s,u){Oe(s,e,u),l.m(e,null)},p(s,[u]){o===(o=i(s))&&l?l.p(s,u):(l.d(1),l=o(s),l&&(l.c(),l.m(e,null))),u&1&&t!==(t=s[0].length===0)&&(e.disabled=t)},i:gt,o:gt,d(s){s&&qe(e),l.d()}}}function Mn(n,e,t){let{i18n:i}=e,{micDevices:o=[]}=e;const l=Dn();return n.$$set=s=>{"i18n"in s&&t(1,i=s.i18n),"micDevices"in s&&t(0,o=s.micDevices)},n.$$.update=()=>{if(n.$$.dirty&2)try{let s=[];Pe.getAvailableAudioDevices().then(u=>{t(0,o=u),u.forEach(a=>{a.deviceId&&s.push(a)}),t(0,o=s)})}catch(s){throw s instanceof DOMException&&s.name=="NotAllowedError"&&l("error",i("audio.allow_recording_access")),s}},[o,i]}class jt extends pn{constructor(e){super(),kn(this,e,Mn,En,yn,{i18n:1,micDevices:0})}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),ht()}get micDevices(){return this.$$.ctx[0]}set micDevices(e){this.$$set({micDevices:e}),ht()}}const{SvelteComponent:An,add_flush_callback:Cn,append:T,attr:J,bind:Pn,binding_callbacks:we,create_component:wt,destroy_component:vt,detach:Ft,element:te,flush:Ee,init:Ln,insert:Ht,listen:Me,mount_component:kt,run_all:Bn,safe_not_equal:In,set_data:Ae,space:pe,text:Ce,transition_in:yt,transition_out:Dt}=window.__gradio__svelte__internal;function Rt(n){let e,t;return{c(){e=te("time"),t=Ce(n[2]),J(e,"class","duration-button duration svelte-1d9m1oy")},m(i,o){Ht(i,e,o),T(e,t)},p(i,o){o&4&&Ae(t,i[2])},d(i){i&&Ft(e)}}}function zn(n){let e,t,i,o=n[1]("audio.record")+"",l,s,u,a=n[1]("audio.stop")+"",c,r,_,d,h=n[1]("audio.stop")+"",w,m,v,D,E,k,A=n[1]("audio.resume")+"",I,W,y,C,p,S,U,z;D=new dn({});let M=n[4]&&!n[3]&&Rt(n);function K(R){n[21](R)}let F={i18n:n[1]};return n[5]!==void 0&&(F.micDevices=n[5]),C=new jt({props:F}),we.push(()=>Pn(C,"micDevices",K)),{c(){e=te("div"),t=te("div"),i=te("button"),l=Ce(o),s=pe(),u=te("button"),c=Ce(a),_=pe(),d=te("button"),w=Ce(h),m=pe(),v=te("button"),wt(D.$$.fragment),E=pe(),k=te("button"),I=Ce(A),W=pe(),M&&M.c(),y=pe(),wt(C.$$.fragment),J(i,"class","record record-button svelte-1d9m1oy"),J(u,"class",r="stop-button "+(n[0].isPaused()?"stop-button-paused":"")+" svelte-1d9m1oy"),J(d,"id","stop-paused"),J(d,"class","stop-button-paused svelte-1d9m1oy"),J(v,"aria-label","pause"),J(v,"class","pause-button svelte-1d9m1oy"),J(k,"class","resume-button svelte-1d9m1oy"),J(t,"class","wrapper svelte-1d9m1oy"),J(e,"class","controls svelte-1d9m1oy")},m(R,q){Ht(R,e,q),T(e,t),T(t,i),T(i,l),n[11](i),T(t,s),T(t,u),T(u,c),n[13](u),T(t,_),T(t,d),T(d,w),n[15](d),T(t,m),T(t,v),kt(D,v,null),n[17](v),T(t,E),T(t,k),T(k,I),n[19](k),T(t,W),M&&M.m(t,null),T(e,y),kt(C,e,null),S=!0,U||(z=[Me(i,"click",n[12]),Me(u,"click",n[14]),Me(d,"click",n[16]),Me(v,"click",n[18]),Me(k,"click",n[20])],U=!0)},p(R,[q]){(!S||q&2)&&o!==(o=R[1]("audio.record")+"")&&Ae(l,o),(!S||q&2)&&a!==(a=R[1]("audio.stop")+"")&&Ae(c,a),(!S||q&1&&r!==(r="stop-button "+(R[0].isPaused()?"stop-button-paused":"")+" svelte-1d9m1oy"))&&J(u,"class",r),(!S||q&2)&&h!==(h=R[1]("audio.stop")+"")&&Ae(w,h),(!S||q&2)&&A!==(A=R[1]("audio.resume")+"")&&Ae(I,A),R[4]&&!R[3]?M?M.p(R,q):(M=Rt(R),M.c(),M.m(t,null)):M&&(M.d(1),M=null);const P={};q&2&&(P.i18n=R[1]),!p&&q&32&&(p=!0,P.micDevices=R[5],Cn(()=>p=!1)),C.$set(P)},i(R){S||(yt(D.$$.fragment,R),yt(C.$$.fragment,R),S=!0)},o(R){Dt(D.$$.fragment,R),Dt(C.$$.fragment,R),S=!1},d(R){R&&Ft(e),n[11](null),n[13](null),n[15](null),vt(D),n[17](null),n[19](null),M&&M.d(),vt(C),U=!1,Bn(z)}}}function Tn(n,e,t){let{record:i}=e,{i18n:o}=e,l=[],s,u,a,c,r,{record_time:_}=e,{show_recording_waveform:d}=e,{timing:h=!1}=e;function w(p){we[p?"unshift":"push"](()=>{s=p,t(6,s),t(0,i)})}const m=()=>i.startRecording();function v(p){we[p?"unshift":"push"](()=>{c=p,t(9,c),t(0,i)})}const D=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function E(p){we[p?"unshift":"push"](()=>{r=p,t(10,r),t(0,i)})}const k=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function A(p){we[p?"unshift":"push"](()=>{u=p,t(7,u),t(0,i)})}const I=()=>i.pauseRecording();function W(p){we[p?"unshift":"push"](()=>{a=p,t(8,a),t(0,i)})}const y=()=>i.resumeRecording();function C(p){l=p,t(5,l)}return n.$$set=p=>{"record"in p&&t(0,i=p.record),"i18n"in p&&t(1,o=p.i18n),"record_time"in p&&t(2,_=p.record_time),"show_recording_waveform"in p&&t(3,d=p.show_recording_waveform),"timing"in p&&t(4,h=p.timing)},n.$$.update=()=>{n.$$.dirty&1&&i.on("record-start",()=>{i.startMic(),t(6,s.style.display="none",s),t(9,c.style.display="flex",c),t(7,u.style.display="block",u)}),n.$$.dirty&1&&i.on("record-end",()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopMic(),t(6,s.style.display="flex",s),t(9,c.style.display="none",c),t(7,u.style.display="none",u),t(6,s.disabled=!1,s)}),n.$$.dirty&1&&i.on("record-pause",()=>{t(7,u.style.display="none",u),t(8,a.style.display="block",a),t(9,c.style.display="none",c),t(10,r.style.display="flex",r)}),n.$$.dirty&1&&i.on("record-resume",()=>{t(7,u.style.display="block",u),t(8,a.style.display="none",a),t(6,s.style.display="none",s),t(9,c.style.display="flex",c),t(10,r.style.display="none",r)})},[i,o,_,d,h,l,s,u,a,c,r,w,m,v,D,E,k,A,I,W,y,C]}class Un extends An{constructor(e){super(),Ln(this,e,Tn,zn,In,{record:0,i18n:1,record_time:2,show_recording_waveform:3,timing:4})}get record(){return this.$$.ctx[0]}set record(e){this.$$set({record:e}),Ee()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),Ee()}get record_time(){return this.$$.ctx[2]}set record_time(e){this.$$set({record_time:e}),Ee()}get show_recording_waveform(){return this.$$.ctx[3]}set show_recording_waveform(e){this.$$set({show_recording_waveform:e}),Ee()}get timing(){return this.$$.ctx[4]}set timing(e){this.$$set({timing:e}),Ee()}}const{SvelteComponent:qn,add_flush_callback:Ie,append:V,attr:X,bind:ze,binding_callbacks:ie,check_outros:St,create_component:Vt,destroy_component:Jt,detach:Le,element:Z,flush:ue,group_outros:Et,init:On,insert:Be,mount_component:Gt,noop:Wn,safe_not_equal:Nn,set_data:Yt,space:ve,text:Kt,transition_in:ne,transition_out:ke}=window.__gradio__svelte__internal,{onMount:jn}=window.__gradio__svelte__internal,{createEventDispatcher:Fn}=window.__gradio__svelte__internal;function Mt(n){let e,t,i,o,l,s=n[0]==="edit"&&n[16]>0&&At(n);function u(r,_){return r[15]?Vn:Hn}let a=u(n),c=a(n);return{c(){e=Z("div"),t=Z("time"),t.textContent="0:00",i=ve(),o=Z("div"),s&&s.c(),l=ve(),c.c(),X(t,"class","time svelte-9n45fh"),X(e,"class","timestamps svelte-9n45fh")},m(r,_){Be(r,e,_),V(e,t),n[23](t),V(e,i),V(e,o),s&&s.m(o,null),V(o,l),c.m(o,null)},p(r,_){r[0]==="edit"&&r[16]>0?s?s.p(r,_):(s=At(r),s.c(),s.m(o,l)):s&&(s.d(1),s=null),a===(a=u(r))&&c?c.p(r,_):(c.d(1),c=a(r),c&&(c.c(),c.m(o,null)))},d(r){r&&Le(e),n[23](null),s&&s.d(),c.d()}}}function At(n){let e,t=oe(n[16])+"",i;return{c(){e=Z("time"),i=Kt(t),X(e,"class","trim-duration svelte-9n45fh")},m(o,l){Be(o,e,l),V(e,i)},p(o,l){l[0]&65536&&t!==(t=oe(o[16])+"")&&Yt(i,t)},d(o){o&&Le(e)}}}function Hn(n){let e;return{c(){e=Z("time"),e.textContent="0:00",X(e,"class","duration svelte-9n45fh")},m(t,i){Be(t,e,i),n[24](e)},p:Wn,d(t){t&&Le(e),n[24](null)}}}function Vn(n){let e,t=oe(n[14])+"",i;return{c(){e=Z("time"),i=Kt(t),X(e,"class","duration svelte-9n45fh")},m(o,l){Be(o,e,l),V(e,i)},p(o,l){l[0]&16384&&t!==(t=oe(o[14])+"")&&Yt(i,t)},d(o){o&&Le(e)}}}function Ct(n){let e,t,i;function o(s){n[25](s)}let l={i18n:n[1],timing:n[15],show_recording_waveform:n[2].show_recording_waveform,record_time:oe(n[14])};return n[8]!==void 0&&(l.record=n[8]),e=new Un({props:l}),ie.push(()=>ze(e,"record",o)),{c(){Vt(e.$$.fragment)},m(s,u){Gt(e,s,u),i=!0},p(s,u){const a={};u[0]&2&&(a.i18n=s[1]),u[0]&32768&&(a.timing=s[15]),u[0]&4&&(a.show_recording_waveform=s[2].show_recording_waveform),u[0]&16384&&(a.record_time=oe(s[14])),!t&&u[0]&256&&(t=!0,a.record=s[8],Ie(()=>t=!1)),e.$set(a)},i(s){i||(ne(e.$$.fragment,s),i=!0)},o(s){ke(e.$$.fragment,s),i=!1},d(s){Jt(e,s)}}}function Pt(n){let e,t,i,o,l;function s(r){n[26](r)}function u(r){n[27](r)}function a(r){n[28](r)}let c={container:n[6],playing:n[12],audio_duration:n[13],i18n:n[1],editable:n[4],interactive:!0,handle_trim_audio:n[17],show_redo:!0,handle_reset_value:n[3],waveform_options:n[2]};return n[5]!==void 0&&(c.waveform=n[5]),n[16]!==void 0&&(c.trimDuration=n[16]),n[0]!==void 0&&(c.mode=n[0]),e=new sn({props:c}),ie.push(()=>ze(e,"waveform",s)),ie.push(()=>ze(e,"trimDuration",u)),ie.push(()=>ze(e,"mode",a)),{c(){Vt(e.$$.fragment)},m(r,_){Gt(e,r,_),l=!0},p(r,_){const d={};_[0]&64&&(d.container=r[6]),_[0]&4096&&(d.playing=r[12]),_[0]&8192&&(d.audio_duration=r[13]),_[0]&2&&(d.i18n=r[1]),_[0]&16&&(d.editable=r[4]),_[0]&8&&(d.handle_reset_value=r[3]),_[0]&4&&(d.waveform_options=r[2]),!t&&_[0]&32&&(t=!0,d.waveform=r[5],Ie(()=>t=!1)),!i&&_[0]&65536&&(i=!0,d.trimDuration=r[16],Ie(()=>i=!1)),!o&&_[0]&1&&(o=!0,d.mode=r[0],Ie(()=>o=!1)),e.$set(d)},i(r){l||(ne(e.$$.fragment,r),l=!0)},o(r){ke(e.$$.fragment,r),l=!1},d(r){Jt(e,r)}}}function Jn(n){let e,t,i,o,l,s,u,a,c=(n[15]||n[9])&&n[2].show_recording_waveform&&Mt(n),r=n[7]&&!n[9]&&Ct(n),_=n[5]&&n[9]&&Pt(n);return{c(){e=Z("div"),t=Z("div"),i=ve(),o=Z("div"),l=ve(),c&&c.c(),s=ve(),r&&r.c(),u=ve(),_&&_.c(),X(t,"class","microphone svelte-9n45fh"),X(t,"data-testid","microphone-waveform"),X(o,"data-testid","recording-waveform"),X(e,"class","component-wrapper svelte-9n45fh")},m(d,h){Be(d,e,h),V(e,t),n[21](t),V(e,i),V(e,o),n[22](o),V(e,l),c&&c.m(e,null),V(e,s),r&&r.m(e,null),V(e,u),_&&_.m(e,null),a=!0},p(d,h){(d[15]||d[9])&&d[2].show_recording_waveform?c?c.p(d,h):(c=Mt(d),c.c(),c.m(e,s)):c&&(c.d(1),c=null),d[7]&&!d[9]?r?(r.p(d,h),h[0]&640&&ne(r,1)):(r=Ct(d),r.c(),ne(r,1),r.m(e,u)):r&&(Et(),ke(r,1,1,()=>{r=null}),St()),d[5]&&d[9]?_?(_.p(d,h),h[0]&544&&ne(_,1)):(_=Pt(d),_.c(),ne(_,1),_.m(e,null)):_&&(Et(),ke(_,1,1,()=>{_=null}),St())},i(d){a||(ne(r),ne(_),a=!0)},o(d){ke(r),ke(_),a=!1},d(d){d&&Le(e),n[21](null),n[22](null),c&&c.d(),r&&r.d(),_&&_.d()}}}function Gn(n,e,t){let{mode:i}=e,{i18n:o}=e,{dispatch_blob:l}=e,{waveform_settings:s}=e,{waveform_options:u={show_recording_waveform:!0}}=e,{handle_reset_value:a}=e,{editable:c=!0}=e,r,_,d=!1,h,w,m,v=null,D,E,k,A=0,I,W=!1,y=0;const C=()=>{clearInterval(I),t(20,I=setInterval(()=>{t(14,A++,A)},1e3))},p=Fn(),S=()=>{w&&t(7,w.innerHTML="",w),r!==void 0&&r.destroy(),w&&(r=it.create({...s,normalize:!1,container:w}),t(8,m=r.registerPlugin(Pe.create())),m.startMic())},U=()=>{let b=h;!v||!b||t(5,_=it.create({container:b,url:v,...s}))},z=async(b,H)=>{t(0,i="edit");const Y=_.getDecodedData();Y&&await ct(Y,b,H).then(async Q=>{await l([Q],"change"),await l([Q],"stop_recording"),_.destroy(),U()}),p("edit")};jn(()=>{S(),window.addEventListener("keydown",b=>{b.key==="ArrowRight"?_t(_,.1):b.key==="ArrowLeft"&&_t(_,-.1)})});function M(b){ie[b?"unshift":"push"](()=>{w=b,t(7,w)})}function K(b){ie[b?"unshift":"push"](()=>{h=b,t(6,h)})}function F(b){ie[b?"unshift":"push"](()=>{D=b,t(10,D),t(5,_)})}function R(b){ie[b?"unshift":"push"](()=>{E=b,t(11,E),t(5,_)})}function q(b){m=b,t(8,m)}function P(b){_=b,t(5,_)}function G(b){y=b,t(16,y)}function Re(b){i=b,t(0,i)}return n.$$set=b=>{"mode"in b&&t(0,i=b.mode),"i18n"in b&&t(1,o=b.i18n),"dispatch_blob"in b&&t(18,l=b.dispatch_blob),"waveform_settings"in b&&t(19,s=b.waveform_settings),"waveform_options"in b&&t(2,u=b.waveform_options),"handle_reset_value"in b&&t(3,a=b.handle_reset_value),"editable"in b&&t(4,c=b.editable)},n.$$.update=()=>{n.$$.dirty[0]&388&&m?.on("record-start",()=>{if(C(),t(15,W=!0),p("start_recording"),u.show_recording_waveform){let b=w;b&&(b.style.display="block")}}),n.$$.dirty[0]&1835264&&m?.on("record-end",async b=>{t(14,A=0),t(15,W=!1),clearInterval(I);try{const H=await b.arrayBuffer(),Q=await new AudioContext({sampleRate:s.sampleRate}).decodeAudioData(H);Q&&await ct(Q).then(async be=>{await l([be],"change"),await l([be],"stop_recording")})}catch(H){console.error(H)}}),n.$$.dirty[0]&1048832&&m?.on("record-pause",()=>{p("pause_recording"),clearInterval(I)}),n.$$.dirty[0]&256&&m?.on("record-resume",()=>{C()}),n.$$.dirty[0]&2080&&_?.on("decode",b=>{t(13,k=b),E&&t(11,E.textContent=oe(b),E)}),n.$$.dirty[0]&1056&&_?.on("timeupdate",b=>D&&t(10,D.textContent=oe(b),D)),n.$$.dirty[0]&32&&_?.on("pause",()=>{p("pause"),t(12,d=!1)}),n.$$.dirty[0]&32&&_?.on("play",()=>{p("play"),t(12,d=!0)}),n.$$.dirty[0]&32&&_?.on("finish",()=>{p("stop"),t(12,d=!1)}),n.$$.dirty[0]&960&&m?.on("record-end",b=>{t(9,v=URL.createObjectURL(b));const H=w,Y=h;H&&(H.style.display="none"),Y&&v&&(Y.innerHTML="",U())})},[i,o,u,a,c,_,h,w,m,v,D,E,d,k,A,W,y,z,l,s,I,M,K,F,R,q,P,G,Re]}class Yn extends qn{constructor(e){super(),On(this,e,Gn,Jn,Nn,{mode:0,i18n:1,dispatch_blob:18,waveform_settings:19,waveform_options:2,handle_reset_value:3,editable:4},null,[-1,-1])}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),ue()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),ue()}get dispatch_blob(){return this.$$.ctx[18]}set dispatch_blob(e){this.$$set({dispatch_blob:e}),ue()}get waveform_settings(){return this.$$.ctx[19]}set waveform_settings(e){this.$$set({waveform_settings:e}),ue()}get waveform_options(){return this.$$.ctx[2]}set waveform_options(e){this.$$set({waveform_options:e}),ue()}get handle_reset_value(){return this.$$.ctx[3]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),ue()}get editable(){return this.$$.ctx[4]}set editable(e){this.$$set({editable:e}),ue()}}const{SvelteComponent:Kn,add_flush_callback:Qn,append:$,attr:fe,bind:Xn,binding_callbacks:Qt,create_component:Zn,destroy_component:$n,detach:We,element:de,flush:_e,init:xn,insert:Ne,listen:Xt,mount_component:ei,null_to_empty:Lt,safe_not_equal:ti,set_data:Zt,set_style:Bt,space:Te,text:$t,transition_in:ni,transition_out:ii}=window.__gradio__svelte__internal,{onMount:oi}=window.__gradio__svelte__internal;function It(n){let e;return{c(){e=de("div"),Bt(e,"display",n[0]?"block":"none")},m(t,i){Ne(t,e,i),n[10](e)},p(t,i){i&1&&Bt(e,"display",t[0]?"block":"none")},d(t){t&&We(e),n[10](null)}}}function si(n){let e,t,i,o=n[4]("audio.record")+"",l,s,u;return{c(){e=de("button"),t=de("span"),t.innerHTML='<span class="dot"></span>',i=Te(),l=$t(o),fe(t,"class","record-icon"),fe(e,"class","record-button svelte-1m31gsz")},m(a,c){Ne(a,e,c),$(e,t),$(e,i),$(e,l),s||(u=Xt(e,"click",n[12]),s=!0)},p(a,c){c&16&&o!==(o=a[4]("audio.record")+"")&&Zt(l,o)},d(a){a&&We(e),s=!1,u()}}}function ri(n){let e,t,i,o=(n[1]?n[4]("audio.pause"):n[4]("audio.stop"))+"",l,s,u,a;return{c(){e=de("button"),t=de("span"),t.innerHTML='<span class="pinger"></span> <span class="dot"></span>',i=Te(),l=$t(o),fe(t,"class","record-icon"),fe(e,"class",s=Lt(n[1]?"stop-button-paused":"stop-button")+" svelte-1m31gsz")},m(c,r){Ne(c,e,r),$(e,t),$(e,i),$(e,l),u||(a=Xt(e,"click",n[11]),u=!0)},p(c,r){r&18&&o!==(o=(c[1]?c[4]("audio.pause"):c[4]("audio.stop"))+"")&&Zt(l,o),r&2&&s!==(s=Lt(c[1]?"stop-button-paused":"stop-button")+" svelte-1m31gsz")&&fe(e,"class",s)},d(c){c&&We(e),u=!1,a()}}}function li(n){let e,t,i,o,l,s,u,a=n[5].show_recording_waveform&&It(n);function c(w,m){return w[0]?ri:si}let r=c(n),_=r(n);function d(w){n[13](w)}let h={i18n:n[4]};return n[8]!==void 0&&(h.micDevices=n[8]),l=new jt({props:h}),Qt.push(()=>Xn(l,"micDevices",d)),{c(){e=de("div"),a&&a.c(),t=Te(),i=de("div"),_.c(),o=Te(),Zn(l.$$.fragment),fe(i,"class","controls svelte-1m31gsz"),fe(e,"class","mic-wrap svelte-1m31gsz")},m(w,m){Ne(w,e,m),a&&a.m(e,null),$(e,t),$(e,i),_.m(i,null),$(i,o),ei(l,i,null),u=!0},p(w,[m]){w[5].show_recording_waveform?a?a.p(w,m):(a=It(w),a.c(),a.m(e,t)):a&&(a.d(1),a=null),r===(r=c(w))&&_?_.p(w,m):(_.d(1),_=r(w),_&&(_.c(),_.m(i,o)));const v={};m&16&&(v.i18n=w[4]),!s&&m&256&&(s=!0,v.micDevices=w[8],Qn(()=>s=!1)),l.$set(v)},i(w){u||(ni(l.$$.fragment,w),u=!0)},o(w){ii(l.$$.fragment,w),u=!1},d(w){w&&We(e),a&&a.d(),_.d(),$n(l)}}}function ai(n,e,t){let{recording:i=!1}=e,{paused_recording:o=!1}=e,{stop:l}=e,{record:s}=e,{i18n:u}=e,{waveform_settings:a}=e,{waveform_options:c={show_recording_waveform:!0}}=e,r,_,d,h=[];oi(()=>{w()});const w=()=>{r!==void 0&&r.destroy(),d&&(r=it.create({...a,height:100,container:d}),t(6,_=r.registerPlugin(Pe.create())))};function m(k){Qt[k?"unshift":"push"](()=>{d=k,t(7,d)})}const v=()=>{_?.stopMic(),l()},D=()=>{_?.startMic(),s()};function E(k){h=k,t(8,h)}return n.$$set=k=>{"recording"in k&&t(0,i=k.recording),"paused_recording"in k&&t(1,o=k.paused_recording),"stop"in k&&t(2,l=k.stop),"record"in k&&t(3,s=k.record),"i18n"in k&&t(4,u=k.i18n),"waveform_settings"in k&&t(9,a=k.waveform_settings),"waveform_options"in k&&t(5,c=k.waveform_options)},[i,o,l,s,u,c,_,d,h,a,m,v,D,E]}class ui extends Kn{constructor(e){super(),xn(this,e,ai,li,ti,{recording:0,paused_recording:1,stop:2,record:3,i18n:4,waveform_settings:9,waveform_options:5})}get recording(){return this.$$.ctx[0]}set recording(e){this.$$set({recording:e}),_e()}get paused_recording(){return this.$$.ctx[1]}set paused_recording(e){this.$$set({paused_recording:e}),_e()}get stop(){return this.$$.ctx[2]}set stop(e){this.$$set({stop:e}),_e()}get record(){return this.$$.ctx[3]}set record(e){this.$$set({record:e}),_e()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),_e()}get waveform_settings(){return this.$$.ctx[9]}set waveform_settings(e){this.$$set({waveform_settings:e}),_e()}get waveform_options(){return this.$$.ctx[5]}set waveform_options(e){this.$$set({waveform_options:e}),_e()}}const{SvelteComponent:_i,add_flush_callback:je,append:ci,attr:fi,bind:Fe,binding_callbacks:He,bubble:ce,check_outros:rt,create_component:se,create_slot:di,destroy_component:re,detach:ye,element:mi,empty:xt,flush:B,get_all_dirty_from_scope:hi,get_slot_changes:gi,group_outros:lt,init:bi,insert:De,mount_component:le,safe_not_equal:pi,space:Ue,transition_in:N,transition_out:j,update_slot_base:wi}=window.__gradio__svelte__internal,{onDestroy:vi,createEventDispatcher:ki}=window.__gradio__svelte__internal;function yi(n){let e,t,i,o,l;e=new Tt({props:{i18n:n[9],download:n[6]?n[1].url:null,absolute:!0}}),e.$on("clear",n[23]),e.$on("edit",n[37]);function s(a){n[38](a)}let u={value:n[1],label:n[3],i18n:n[9],dispatch_blob:n[21],waveform_settings:n[10],waveform_options:n[12],trim_region_settings:n[11],handle_reset_value:n[13],editable:n[14],interactive:!0};return n[19]!==void 0&&(u.mode=n[19]),i=new rn({props:u}),He.push(()=>Fe(i,"mode",s)),i.$on("stop",n[39]),i.$on("play",n[40]),i.$on("pause",n[41]),i.$on("edit",n[42]),{c(){se(e.$$.fragment),t=Ue(),se(i.$$.fragment)},m(a,c){le(e,a,c),De(a,t,c),le(i,a,c),l=!0},p(a,c){const r={};c[0]&512&&(r.i18n=a[9]),c[0]&66&&(r.download=a[6]?a[1].url:null),e.$set(r);const _={};c[0]&2&&(_.value=a[1]),c[0]&8&&(_.label=a[3]),c[0]&512&&(_.i18n=a[9]),c[0]&1024&&(_.waveform_settings=a[10]),c[0]&4096&&(_.waveform_options=a[12]),c[0]&2048&&(_.trim_region_settings=a[11]),c[0]&8192&&(_.handle_reset_value=a[13]),c[0]&16384&&(_.editable=a[14]),!o&&c[0]&524288&&(o=!0,_.mode=a[19],je(()=>o=!1)),i.$set(_)},i(a){l||(N(e.$$.fragment,a),N(i.$$.fragment,a),l=!0)},o(a){j(e.$$.fragment,a),j(i.$$.fragment,a),l=!1},d(a){a&&ye(t),re(e,a),re(i,a)}}}function Di(n){let e,t,i,o;const l=[Si,Ri],s=[];function u(a,c){return a[2]==="microphone"?0:a[2]==="upload"?1:-1}return~(e=u(n))&&(t=s[e]=l[e](n)),{c(){t&&t.c(),i=xt()},m(a,c){~e&&s[e].m(a,c),De(a,i,c),o=!0},p(a,c){let r=e;e=u(a),e===r?~e&&s[e].p(a,c):(t&&(lt(),j(s[r],1,1,()=>{s[r]=null}),rt()),~e?(t=s[e],t?t.p(a,c):(t=s[e]=l[e](a),t.c()),N(t,1),t.m(i.parentNode,i)):t=null)},i(a){o||(N(t),o=!0)},o(a){j(t),o=!1},d(a){a&&ye(i),~e&&s[e].d(a)}}}function Ri(n){let e,t,i;function o(s){n[35](s)}let l={filetype:"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*",root:n[4],max_file_size:n[15],upload:n[16],stream_handler:n[17],$$slots:{default:[Ei]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.dragging=n[0]),e=new un({props:l}),He.push(()=>Fe(e,"dragging",o)),e.$on("load",n[24]),e.$on("error",n[36]),{c(){se(e.$$.fragment)},m(s,u){le(e,s,u),i=!0},p(s,u){const a={};u[0]&16&&(a.root=s[4]),u[0]&32768&&(a.max_file_size=s[15]),u[0]&65536&&(a.upload=s[16]),u[0]&131072&&(a.stream_handler=s[17]),u[1]&8192&&(a.$$scope={dirty:u,ctx:s}),!t&&u[0]&1&&(t=!0,a.dragging=s[0],je(()=>t=!1)),e.$set(a)},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){re(e,s)}}}function Si(n){let e,t,i,o,l,s;e=new Tt({props:{i18n:n[9],absolute:!0}}),e.$on("clear",n[23]);const u=[Ai,Mi],a=[];function c(r,_){return r[8]?0:1}return i=c(n),o=a[i]=u[i](n),{c(){se(e.$$.fragment),t=Ue(),o.c(),l=xt()},m(r,_){le(e,r,_),De(r,t,_),a[i].m(r,_),De(r,l,_),s=!0},p(r,_){const d={};_[0]&512&&(d.i18n=r[9]),e.$set(d);let h=i;i=c(r),i===h?a[i].p(r,_):(lt(),j(a[h],1,1,()=>{a[h]=null}),rt(),o=a[i],o?o.p(r,_):(o=a[i]=u[i](r),o.c()),N(o,1),o.m(l.parentNode,l))},i(r){s||(N(e.$$.fragment,r),N(o),s=!0)},o(r){j(e.$$.fragment,r),j(o),s=!1},d(r){r&&(ye(t),ye(l)),re(e,r),a[i].d(r)}}}function Ei(n){let e;const t=n[30].default,i=di(t,n,n[44],null);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,l){i&&i.p&&(!e||l[1]&8192)&&wi(i,t,o,o[44],e?gi(t,o[44],l,null):hi(o[44]),null)},i(o){e||(N(i,o),e=!0)},o(o){j(i,o),e=!1},d(o){i&&i.d(o)}}}function Mi(n){let e,t,i;function o(s){n[31](s)}let l={i18n:n[9],editable:n[14],dispatch_blob:n[21],waveform_settings:n[10],waveform_options:n[12],handle_reset_value:n[13]};return n[19]!==void 0&&(l.mode=n[19]),e=new Yn({props:l}),He.push(()=>Fe(e,"mode",o)),e.$on("start_recording",n[32]),e.$on("pause_recording",n[33]),e.$on("stop_recording",n[34]),{c(){se(e.$$.fragment)},m(s,u){le(e,s,u),i=!0},p(s,u){const a={};u[0]&512&&(a.i18n=s[9]),u[0]&16384&&(a.editable=s[14]),u[0]&1024&&(a.waveform_settings=s[10]),u[0]&4096&&(a.waveform_options=s[12]),u[0]&8192&&(a.handle_reset_value=s[13]),!t&&u[0]&524288&&(t=!0,a.mode=s[19],je(()=>t=!1)),e.$set(a)},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){re(e,s)}}}function Ai(n){let e,t;return e=new ui({props:{record:n[22],recording:n[18],stop:n[25],i18n:n[9],waveform_settings:n[10],waveform_options:n[12]}}),{c(){se(e.$$.fragment)},m(i,o){le(e,i,o),t=!0},p(i,o){const l={};o[0]&262144&&(l.recording=i[18]),o[0]&512&&(l.i18n=i[9]),o[0]&1024&&(l.waveform_settings=i[10]),o[0]&4096&&(l.waveform_options=i[12]),e.$set(l)},i(i){t||(N(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){re(e,i)}}}function Ci(n){let e,t,i,o,l,s,u,a,c;e=new _n({props:{show_label:n[5],Icon:cn,float:n[2]==="upload"&&n[1]===null,label:n[3]||n[9]("audio.audio")}});const r=[Di,yi],_=[];function d(m,v){return m[1]===null||m[8]?0:1}o=d(n),l=_[o]=r[o](n);function h(m){n[43](m)}let w={sources:n[7],handle_clear:n[23]};return n[2]!==void 0&&(w.active_source=n[2]),u=new fn({props:w}),He.push(()=>Fe(u,"active_source",h)),{c(){se(e.$$.fragment),t=Ue(),i=mi("div"),l.c(),s=Ue(),se(u.$$.fragment),fi(i,"class","audio-container svelte-cbyffp")},m(m,v){le(e,m,v),De(m,t,v),De(m,i,v),_[o].m(i,null),ci(i,s),le(u,i,null),c=!0},p(m,v){const D={};v[0]&32&&(D.show_label=m[5]),v[0]&6&&(D.float=m[2]==="upload"&&m[1]===null),v[0]&520&&(D.label=m[3]||m[9]("audio.audio")),e.$set(D);let E=o;o=d(m),o===E?_[o].p(m,v):(lt(),j(_[E],1,1,()=>{_[E]=null}),rt(),l=_[o],l?l.p(m,v):(l=_[o]=r[o](m),l.c()),N(l,1),l.m(i,s));const k={};v[0]&128&&(k.sources=m[7]),!a&&v[0]&4&&(a=!0,k.active_source=m[2],je(()=>a=!1)),u.$set(k)},i(m){c||(N(e.$$.fragment,m),N(l),N(u.$$.fragment,m),c=!0)},o(m){j(e.$$.fragment,m),j(l),j(u.$$.fragment,m),c=!1},d(m){m&&(ye(t),ye(i)),re(e,m),_[o].d(),re(u)}}}const Pi=500,zt=44;function Li(n,e,t){let{$$slots:i={},$$scope:o}=e,{value:l=null}=e,{label:s}=e,{root:u}=e,{show_label:a=!0}=e,{show_download_button:c=!1}=e,{sources:r=["microphone","upload"]}=e,{pending:_=!1}=e,{streaming:d=!1}=e,{i18n:h}=e,{waveform_settings:w}=e,{trim_region_settings:m={}}=e,{waveform_options:v={}}=e,{dragging:D}=e,{active_source:E}=e,{handle_reset_value:k=()=>{}}=e,{editable:A=!0}=e,{max_file_size:I=null}=e,{upload:W}=e,{stream_handler:y}=e,C=!1,p,S="",U,z=[],M=!1,K=!1,F=[],R;function q(){R=[ft(()=>import("./module-DzRpSqq1.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),ft(()=>import("./module-BA06XY8_.js"),__vite__mapDeps([6,1]),import.meta.url)]}d&&q();const P=ki(),G=async(f,O)=>{let ae=new File(f,"audio.wav");const Se=await an([ae],O==="stream");t(1,l=(await W(Se,u,void 0,I||void 0))?.filter(Boolean)[0]),P(O,l)};vi(()=>{d&&p&&p.state!=="inactive"&&p.stop()});async function Re(){let f;try{f=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(O){if(!navigator.mediaDevices){P("error",h("audio.no_device_support"));return}if(O instanceof DOMException&&O.name=="NotAllowedError"){P("error",h("audio.allow_recording_access"));return}throw O}if(f!=null){if(d){const[{MediaRecorder:O,register:ae},{connect:Se}]=await Promise.all(R);await ae(await Se()),p=new O(f,{mimeType:"audio/wav"}),p.addEventListener("dataavailable",b)}else p=new MediaRecorder(f),p.addEventListener("dataavailable",O=>{F.push(O.data)}),p.addEventListener("stop",async()=>{t(18,C=!1),await G(F,"change"),await G(F,"stop_recording"),F=[]});K=!0}}async function b(f){let O=await f.data.arrayBuffer(),ae=new Uint8Array(O);if(U||(t(27,U=new Uint8Array(O.slice(0,zt))),ae=new Uint8Array(O.slice(zt))),_)z.push(ae);else{let Se=[U].concat(z,[ae]);G(Se,"stream"),t(28,z=[])}}async function H(){t(18,C=!0),P("start_recording"),K||await Re(),t(27,U=void 0),d&&p.start(Pi)}function Y(){P("change",null),P("clear"),t(19,S=""),t(1,l=null)}function Q({detail:f}){t(1,l=f),P("change",f),P("upload",f)}function be(){t(18,C=!1),d&&(P("stop_recording"),p.stop(),_&&t(29,M=!0),G(F,"stop_recording"),P("clear"),t(19,S=""))}function Ve(f){S=f,t(19,S)}function Je(f){ce.call(this,n,f)}function Ge(f){ce.call(this,n,f)}function Ye(f){ce.call(this,n,f)}function Ke(f){D=f,t(0,D)}const Qe=({detail:f})=>P("error",f),Xe=()=>t(19,S="edit");function Ze(f){S=f,t(19,S)}function $e(f){ce.call(this,n,f)}function xe(f){ce.call(this,n,f)}function et(f){ce.call(this,n,f)}function tt(f){ce.call(this,n,f)}function g(f){E=f,t(2,E)}return n.$$set=f=>{"value"in f&&t(1,l=f.value),"label"in f&&t(3,s=f.label),"root"in f&&t(4,u=f.root),"show_label"in f&&t(5,a=f.show_label),"show_download_button"in f&&t(6,c=f.show_download_button),"sources"in f&&t(7,r=f.sources),"pending"in f&&t(26,_=f.pending),"streaming"in f&&t(8,d=f.streaming),"i18n"in f&&t(9,h=f.i18n),"waveform_settings"in f&&t(10,w=f.waveform_settings),"trim_region_settings"in f&&t(11,m=f.trim_region_settings),"waveform_options"in f&&t(12,v=f.waveform_options),"dragging"in f&&t(0,D=f.dragging),"active_source"in f&&t(2,E=f.active_source),"handle_reset_value"in f&&t(13,k=f.handle_reset_value),"editable"in f&&t(14,A=f.editable),"max_file_size"in f&&t(15,I=f.max_file_size),"upload"in f&&t(16,W=f.upload),"stream_handler"in f&&t(17,y=f.stream_handler),"$$scope"in f&&t(44,o=f.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&P("drag",D),n.$$.dirty[0]&1006632960&&M&&_===!1&&(t(29,M=!1),U&&z)){let f=[U].concat(z);t(28,z=[]),G(f,"stream")}},[D,l,E,s,u,a,c,r,d,h,w,m,v,k,A,I,W,y,C,S,P,G,H,Y,Q,be,_,U,z,M,i,Ve,Je,Ge,Ye,Ke,Qe,Xe,Ze,$e,xe,et,tt,g,o]}class Bi extends _i{constructor(e){super(),bi(this,e,Li,Ci,pi,{value:1,label:3,root:4,show_label:5,show_download_button:6,sources:7,pending:26,streaming:8,i18n:9,waveform_settings:10,trim_region_settings:11,waveform_options:12,dragging:0,active_source:2,handle_reset_value:13,editable:14,max_file_size:15,upload:16,stream_handler:17},null,[-1,-1])}get value(){return this.$$.ctx[1]}set value(e){this.$$set({value:e}),B()}get label(){return this.$$.ctx[3]}set label(e){this.$$set({label:e}),B()}get root(){return this.$$.ctx[4]}set root(e){this.$$set({root:e}),B()}get show_label(){return this.$$.ctx[5]}set show_label(e){this.$$set({show_label:e}),B()}get show_download_button(){return this.$$.ctx[6]}set show_download_button(e){this.$$set({show_download_button:e}),B()}get sources(){return this.$$.ctx[7]}set sources(e){this.$$set({sources:e}),B()}get pending(){return this.$$.ctx[26]}set pending(e){this.$$set({pending:e}),B()}get streaming(){return this.$$.ctx[8]}set streaming(e){this.$$set({streaming:e}),B()}get i18n(){return this.$$.ctx[9]}set i18n(e){this.$$set({i18n:e}),B()}get waveform_settings(){return this.$$.ctx[10]}set waveform_settings(e){this.$$set({waveform_settings:e}),B()}get trim_region_settings(){return this.$$.ctx[11]}set trim_region_settings(e){this.$$set({trim_region_settings:e}),B()}get waveform_options(){return this.$$.ctx[12]}set waveform_options(e){this.$$set({waveform_options:e}),B()}get dragging(){return this.$$.ctx[0]}set dragging(e){this.$$set({dragging:e}),B()}get active_source(){return this.$$.ctx[2]}set active_source(e){this.$$set({active_source:e}),B()}get handle_reset_value(){return this.$$.ctx[13]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),B()}get editable(){return this.$$.ctx[14]}set editable(e){this.$$set({editable:e}),B()}get max_file_size(){return this.$$.ctx[15]}set max_file_size(e){this.$$set({max_file_size:e}),B()}get upload(){return this.$$.ctx[16]}set upload(e){this.$$set({upload:e}),B()}get stream_handler(){return this.$$.ctx[17]}set stream_handler(e){this.$$set({stream_handler:e}),B()}}const Ii=Bi,{SvelteComponent:zi,add_flush_callback:Ti,assign:en,bind:Ui,binding_callbacks:qi,check_outros:Oi,create_component:me,destroy_component:he,detach:at,empty:Wi,flush:L,get_spread_object:tn,get_spread_update:nn,group_outros:Ni,init:ji,insert:ut,mount_component:ge,safe_not_equal:Fi,space:on,transition_in:x,transition_out:ee}=window.__gradio__svelte__internal;function Hi(n){let e,t;return e=new qt({props:{variant:n[0]===null&&n[20]==="upload"?"dashed":"solid",border_mode:n[21]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[2],elem_classes:n[3],visible:n[4],container:n[10],scale:n[11],min_width:n[12],$$slots:{default:[Gi]},$$scope:{ctx:n}}}),{c(){me(e.$$.fragment)},m(i,o){ge(e,i,o),t=!0},p(i,o){const l={};o[0]&1048577&&(l.variant=i[0]===null&&i[20]==="upload"?"dashed":"solid"),o[0]&2097152&&(l.border_mode=i[21]?"focus":"base"),o[0]&4&&(l.elem_id=i[2]),o[0]&8&&(l.elem_classes=i[3]),o[0]&16&&(l.visible=i[4]),o[0]&1024&&(l.container=i[10]),o[0]&2048&&(l.scale=i[11]),o[0]&4096&&(l.min_width=i[12]),o[0]&8364995|o[1]&1048576&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(x(e.$$.fragment,i),t=!0)},o(i){ee(e.$$.fragment,i),t=!1},d(i){he(e,i)}}}function Vi(n){let e,t;return e=new qt({props:{variant:"solid",border_mode:n[21]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[2],elem_classes:n[3],visible:n[4],container:n[10],scale:n[11],min_width:n[12],$$slots:{default:[Yi]},$$scope:{ctx:n}}}),{c(){me(e.$$.fragment)},m(i,o){ge(e,i,o),t=!0},p(i,o){const l={};o[0]&2097152&&(l.border_mode=i[21]?"focus":"base"),o[0]&4&&(l.elem_id=i[2]),o[0]&8&&(l.elem_classes=i[3]),o[0]&16&&(l.visible=i[4]),o[0]&1024&&(l.container=i[10]),o[0]&2048&&(l.scale=i[11]),o[0]&4096&&(l.min_width=i[12]),o[0]&4842115|o[1]&1048576&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(x(e.$$.fragment,i),t=!0)},o(i){ee(e.$$.fragment,i),t=!1},d(i){he(e,i)}}}function Ji(n){let e,t;return e=new mn({props:{i18n:n[19].i18n,type:"audio"}}),{c(){me(e.$$.fragment)},m(i,o){ge(e,i,o),t=!0},p(i,o){const l={};o[0]&524288&&(l.i18n=i[19].i18n),e.$set(l)},i(i){t||(x(e.$$.fragment,i),t=!0)},o(i){ee(e.$$.fragment,i),t=!1},d(i){he(e,i)}}}function Gi(n){let e,t,i,o,l;const s=[{autoscroll:n[19].autoscroll},{i18n:n[19].i18n},n[1]];let u={};for(let r=0;r<s.length;r+=1)u=en(u,s[r]);e=new Ut({props:u}),e.$on("clear_status",n[35]);function a(r){n[36](r)}let c={label:n[7],show_label:n[9],show_download_button:n[13],value:n[0],root:n[8],sources:n[6],active_source:n[20],pending:n[17],streaming:n[18],max_file_size:n[19].max_file_size,handle_reset_value:n[23],editable:n[15],i18n:n[19].i18n,waveform_settings:n[22],waveform_options:n[16],trim_region_settings:n[24],upload:n[19].client.upload,stream_handler:n[19].client.stream,$$slots:{default:[Ji]},$$scope:{ctx:n}};return n[21]!==void 0&&(c.dragging=n[21]),i=new Ii({props:c}),qi.push(()=>Ui(i,"dragging",a)),i.$on("change",n[37]),i.$on("stream",n[38]),i.$on("drag",n[39]),i.$on("edit",n[40]),i.$on("play",n[41]),i.$on("pause",n[42]),i.$on("stop",n[43]),i.$on("start_recording",n[44]),i.$on("pause_recording",n[45]),i.$on("stop_recording",n[46]),i.$on("upload",n[47]),i.$on("clear",n[48]),i.$on("error",n[25]),{c(){me(e.$$.fragment),t=on(),me(i.$$.fragment)},m(r,_){ge(e,r,_),ut(r,t,_),ge(i,r,_),l=!0},p(r,_){const d=_[0]&524290?nn(s,[_[0]&524288&&{autoscroll:r[19].autoscroll},_[0]&524288&&{i18n:r[19].i18n},_[0]&2&&tn(r[1])]):{};e.$set(d);const h={};_[0]&128&&(h.label=r[7]),_[0]&512&&(h.show_label=r[9]),_[0]&8192&&(h.show_download_button=r[13]),_[0]&1&&(h.value=r[0]),_[0]&256&&(h.root=r[8]),_[0]&64&&(h.sources=r[6]),_[0]&1048576&&(h.active_source=r[20]),_[0]&131072&&(h.pending=r[17]),_[0]&262144&&(h.streaming=r[18]),_[0]&524288&&(h.max_file_size=r[19].max_file_size),_[0]&32768&&(h.editable=r[15]),_[0]&524288&&(h.i18n=r[19].i18n),_[0]&4194304&&(h.waveform_settings=r[22]),_[0]&65536&&(h.waveform_options=r[16]),_[0]&524288&&(h.upload=r[19].client.upload),_[0]&524288&&(h.stream_handler=r[19].client.stream),_[0]&524288|_[1]&1048576&&(h.$$scope={dirty:_,ctx:r}),!o&&_[0]&2097152&&(o=!0,h.dragging=r[21],Ti(()=>o=!1)),i.$set(h)},i(r){l||(x(e.$$.fragment,r),x(i.$$.fragment,r),l=!0)},o(r){ee(e.$$.fragment,r),ee(i.$$.fragment,r),l=!1},d(r){r&&at(t),he(e,r),he(i,r)}}}function Yi(n){let e,t,i,o;const l=[{autoscroll:n[19].autoscroll},{i18n:n[19].i18n},n[1]];let s={};for(let u=0;u<l.length;u+=1)s=en(s,l[u]);return e=new Ut({props:s}),e.$on("clear_status",n[29]),i=new ln({props:{i18n:n[19].i18n,show_label:n[9],show_download_button:n[13],show_share_button:n[14],value:n[0],label:n[7],waveform_settings:n[22],waveform_options:n[16],editable:n[15]}}),i.$on("share",n[30]),i.$on("error",n[31]),i.$on("play",n[32]),i.$on("pause",n[33]),i.$on("stop",n[34]),{c(){me(e.$$.fragment),t=on(),me(i.$$.fragment)},m(u,a){ge(e,u,a),ut(u,t,a),ge(i,u,a),o=!0},p(u,a){const c=a[0]&524290?nn(l,[a[0]&524288&&{autoscroll:u[19].autoscroll},a[0]&524288&&{i18n:u[19].i18n},a[0]&2&&tn(u[1])]):{};e.$set(c);const r={};a[0]&524288&&(r.i18n=u[19].i18n),a[0]&512&&(r.show_label=u[9]),a[0]&8192&&(r.show_download_button=u[13]),a[0]&16384&&(r.show_share_button=u[14]),a[0]&1&&(r.value=u[0]),a[0]&128&&(r.label=u[7]),a[0]&4194304&&(r.waveform_settings=u[22]),a[0]&65536&&(r.waveform_options=u[16]),a[0]&32768&&(r.editable=u[15]),i.$set(r)},i(u){o||(x(e.$$.fragment,u),x(i.$$.fragment,u),o=!0)},o(u){ee(e.$$.fragment,u),ee(i.$$.fragment,u),o=!1},d(u){u&&at(t),he(e,u),he(i,u)}}}function Ki(n){let e,t,i,o;const l=[Vi,Hi],s=[];function u(a,c){return a[5]?1:0}return e=u(n),t=s[e]=l[e](n),{c(){t.c(),i=Wi()},m(a,c){s[e].m(a,c),ut(a,i,c),o=!0},p(a,c){let r=e;e=u(a),e===r?s[e].p(a,c):(Ni(),ee(s[r],1,1,()=>{s[r]=null}),Oi(),t=s[e],t?t.p(a,c):(t=s[e]=l[e](a),t.c()),x(t,1),t.m(i.parentNode,i))},i(a){o||(x(t),o=!0)},o(a){ee(t),o=!1},d(a){a&&at(i),s[e].d(a)}}}function Qi(n,e,t){let{elem_id:i=""}=e,{elem_classes:o=[]}=e,{visible:l=!0}=e,{interactive:s}=e,{value:u=null}=e,{sources:a}=e,{label:c}=e,{root:r}=e,{show_label:_}=e,{container:d=!0}=e,{scale:h=null}=e,{min_width:w=void 0}=e,{loading_status:m}=e,{autoplay:v=!1}=e,{show_download_button:D}=e,{show_share_button:E=!1}=e,{editable:k=!0}=e,{waveform_options:A={}}=e,{pending:I}=e,{streaming:W}=e,{gradio:y}=e,C=null,p,S=u;const U=()=>{S===null||u===S||t(0,u=S)};let z,M,K=getComputedStyle(document.documentElement).getPropertyValue("--color-accent");const F={color:A.trim_region_color,drag:!0,resize:!0};function R(){document.documentElement.style.setProperty("--trim-region-color",F.color||K)}R();function q({detail:g}){const[f,O]=g.includes("Invalid file type")?["warning","complete"]:["error","error"];t(1,m=m||{}),t(1,m.status=O,m),t(1,m.message=g,m),y.dispatch(f,g)}const P=()=>y.dispatch("clear_status",m),G=g=>y.dispatch("share",g.detail),Re=g=>y.dispatch("error",g.detail),b=()=>y.dispatch("play"),H=()=>y.dispatch("pause"),Y=()=>y.dispatch("stop"),Q=()=>y.dispatch("clear_status",m);function be(g){z=g,t(21,z)}const Ve=({detail:g})=>t(0,u=g),Je=({detail:g})=>{t(0,u=g),y.dispatch("stream",u)},Ge=({detail:g})=>t(21,z=g),Ye=()=>y.dispatch("edit"),Ke=()=>y.dispatch("play"),Qe=()=>y.dispatch("pause"),Xe=()=>y.dispatch("stop"),Ze=()=>y.dispatch("start_recording"),$e=()=>y.dispatch("pause_recording"),xe=g=>y.dispatch("stop_recording"),et=()=>y.dispatch("upload"),tt=()=>y.dispatch("clear");return n.$$set=g=>{"elem_id"in g&&t(2,i=g.elem_id),"elem_classes"in g&&t(3,o=g.elem_classes),"visible"in g&&t(4,l=g.visible),"interactive"in g&&t(5,s=g.interactive),"value"in g&&t(0,u=g.value),"sources"in g&&t(6,a=g.sources),"label"in g&&t(7,c=g.label),"root"in g&&t(8,r=g.root),"show_label"in g&&t(9,_=g.show_label),"container"in g&&t(10,d=g.container),"scale"in g&&t(11,h=g.scale),"min_width"in g&&t(12,w=g.min_width),"loading_status"in g&&t(1,m=g.loading_status),"autoplay"in g&&t(26,v=g.autoplay),"show_download_button"in g&&t(13,D=g.show_download_button),"show_share_button"in g&&t(14,E=g.show_share_button),"editable"in g&&t(15,k=g.editable),"waveform_options"in g&&t(16,A=g.waveform_options),"pending"in g&&t(17,I=g.pending),"streaming"in g&&t(18,W=g.streaming),"gradio"in g&&t(19,y=g.gradio)},n.$$.update=()=>{n.$$.dirty[0]&268435457&&u&&S===null&&t(28,S=u),n.$$.dirty[0]&134742017&&JSON.stringify(u)!==JSON.stringify(C)&&(t(27,C=u),y.dispatch("change")),n.$$.dirty[0]&1048640&&!p&&a&&t(20,p=a[0]),n.$$.dirty[0]&67174400&&t(22,M={height:50,waveColor:A.waveform_color||"#9ca3af",progressColor:A.waveform_progress_color||K,barWidth:2,barGap:3,cursorWidth:2,cursorColor:"#ddd5e9",autoplay:v,barRadius:10,dragToSeek:!0,normalize:!0,minPxPerSec:20,mediaControls:A.show_controls,sampleRate:A.sample_rate||44100})},[u,m,i,o,l,s,a,c,r,_,d,h,w,D,E,k,A,I,W,y,p,z,M,U,F,q,v,C,S,P,G,Re,b,H,Y,Q,be,Ve,Je,Ge,Ye,Ke,Qe,Xe,Ze,$e,xe,et,tt]}class Xi extends zi{constructor(e){super(),ji(this,e,Qi,Ki,Fi,{elem_id:2,elem_classes:3,visible:4,interactive:5,value:0,sources:6,label:7,root:8,show_label:9,container:10,scale:11,min_width:12,loading_status:1,autoplay:26,show_download_button:13,show_share_button:14,editable:15,waveform_options:16,pending:17,streaming:18,gradio:19},null,[-1,-1])}get elem_id(){return this.$$.ctx[2]}set elem_id(e){this.$$set({elem_id:e}),L()}get elem_classes(){return this.$$.ctx[3]}set elem_classes(e){this.$$set({elem_classes:e}),L()}get visible(){return this.$$.ctx[4]}set visible(e){this.$$set({visible:e}),L()}get interactive(){return this.$$.ctx[5]}set interactive(e){this.$$set({interactive:e}),L()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),L()}get sources(){return this.$$.ctx[6]}set sources(e){this.$$set({sources:e}),L()}get label(){return this.$$.ctx[7]}set label(e){this.$$set({label:e}),L()}get root(){return this.$$.ctx[8]}set root(e){this.$$set({root:e}),L()}get show_label(){return this.$$.ctx[9]}set show_label(e){this.$$set({show_label:e}),L()}get container(){return this.$$.ctx[10]}set container(e){this.$$set({container:e}),L()}get scale(){return this.$$.ctx[11]}set scale(e){this.$$set({scale:e}),L()}get min_width(){return this.$$.ctx[12]}set min_width(e){this.$$set({min_width:e}),L()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),L()}get autoplay(){return this.$$.ctx[26]}set autoplay(e){this.$$set({autoplay:e}),L()}get show_download_button(){return this.$$.ctx[13]}set show_download_button(e){this.$$set({show_download_button:e}),L()}get show_share_button(){return this.$$.ctx[14]}set show_share_button(e){this.$$set({show_share_button:e}),L()}get editable(){return this.$$.ctx[15]}set editable(e){this.$$set({editable:e}),L()}get waveform_options(){return this.$$.ctx[16]}set waveform_options(e){this.$$set({waveform_options:e}),L()}get pending(){return this.$$.ctx[17]}set pending(e){this.$$set({pending:e}),L()}get streaming(){return this.$$.ctx[18]}set streaming(e){this.$$set({streaming:e}),L()}get gradio(){return this.$$.ctx[19]}set gradio(e){this.$$set({gradio:e}),L()}}const wo=Xi;export{yo as BaseExample,Ii as BaseInteractiveAudio,rn as BasePlayer,ln as BaseStaticAudio,wo as default};
//# sourceMappingURL=index-CKduvFof.js.map
