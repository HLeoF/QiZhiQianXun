import{I as Ne}from"./Index-HnsngA2K.js";import{B as qe}from"./BlockLabel-du95yTCe.js";import{E as He}from"./Empty-B-q4dRI6.js";import{S as Pe}from"./ShareButton-D7_uro_U.js";import{D as Ve}from"./Download-DVtk-Jv3.js";import{I as ke}from"./Image-Bsh8Umrh.js";import"./index-DfiasXCI.js";/* empty css                                                   */import{M as ve}from"./ModifyUpload-BQ2qugrc.js";import{I as te}from"./Image-CI3yPJk1.js";/* empty css                                                   */import{u as Xe}from"./Blocks-BW0LI6Mk.js";import"./svelte/svelte.js";import"./Undo-CpmTQw3B.js";import"./DownloadLink-CVlM3uy0.js";import"./file-url-YFl-0Cl9.js";import"./Button-DHuQQqcr.js";var re=Object.prototype.hasOwnProperty;function oe(l,e,t){for(t of l.keys())if(K(t,e))return t}function K(l,e){var t,n,i;if(l===e)return!0;if(l&&e&&(t=l.constructor)===e.constructor){if(t===Date)return l.getTime()===e.getTime();if(t===RegExp)return l.toString()===e.toString();if(t===Array){if((n=l.length)===e.length)for(;n--&&K(l[n],e[n]););return n===-1}if(t===Set){if(l.size!==e.size)return!1;for(n of l)if(i=n,i&&typeof i=="object"&&(i=oe(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(l.size!==e.size)return!1;for(n of l)if(i=n[0],i&&typeof i=="object"&&(i=oe(e,i),!i)||!K(n[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)l=new Uint8Array(l),e=new Uint8Array(e);else if(t===DataView){if((n=l.byteLength)===e.byteLength)for(;n--&&l.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(l)){if((n=l.byteLength)===e.byteLength)for(;n--&&l[n]===e[n];);return n===-1}if(!t||typeof l=="object"){n=0;for(t in l)if(re.call(l,t)&&++n&&!re.call(e,t)||!(t in e)||!K(l[t],e[t]))return!1;return Object.keys(e).length===n}}return l!==l&&e!==e}async function Fe(l){return l?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(l.map(async([t,n])=>t===null||!t.url?"":await Xe(t.url)))).map(t=>`<img src="${t}" style="height: 400px" />`).join("")}</div>`:""}const{SvelteComponent:We,add_render_callback:Je,append:B,attr:L,binding_callbacks:se,bubble:fe,check_outros:V,create_component:G,destroy_component:M,destroy_each:ye,detach:R,element:T,empty:Ke,ensure_array_like:$,flush:z,globals:Qe,group_outros:X,init:Ye,insert:A,listen:Q,mount_component:N,run_all:Ze,safe_not_equal:$e,set_data:je,set_style:C,space:U,text:Le,toggle_class:D,transition_in:b,transition_out:v}=window.__gradio__svelte__internal,{window:ze}=Qe,{createEventDispatcher:xe}=window.__gradio__svelte__internal,{tick:et}=window.__gradio__svelte__internal;function ae(l,e,t){const n=l.slice();return n[42]=e[t],n[44]=t,n}function ue(l,e,t){const n=l.slice();return n[45]=e[t],n[46]=e,n[44]=t,n}function ce(l){let e,t;return e=new qe({props:{show_label:l[2],Icon:ke,label:l[3]||"Gallery"}}),{c(){G(e.$$.fragment)},m(n,i){N(e,n,i),t=!0},p(n,i){const a={};i[0]&4&&(a.show_label=n[2]),i[0]&8&&(a.label=n[3]||"Gallery"),e.$set(a)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function tt(l){let e,t,n,i,a,u,g=l[18]&&l[7]&&_e(l),s=l[12]&&de(l),m=l[9]&&be(l),w=$(l[14]),_=[];for(let r=0;r<w.length;r+=1)_[r]=pe(ae(l,w,r));const c=r=>v(_[r],1,1,()=>{_[r]=null});return{c(){g&&g.c(),e=U(),t=T("div"),n=T("div"),s&&s.c(),i=U(),m&&m.c(),a=U();for(let r=0;r<_.length;r+=1)_[r].c();L(n,"class","grid-container svelte-eynlr2"),C(n,"--grid-cols",l[4]),C(n,"--grid-rows",l[5]),C(n,"--object-fit",l[8]),C(n,"height",l[6]),D(n,"pt-6",l[2]),L(t,"class","grid-wrap svelte-eynlr2"),D(t,"minimal",l[13]==="minimal"),D(t,"fixed-height",l[13]!=="minimal"&&(!l[6]||l[6]=="auto"))},m(r,f){g&&g.m(r,f),A(r,e,f),A(r,t,f),B(t,n),s&&s.m(n,null),B(n,i),m&&m.m(n,null),B(n,a);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(n,null);u=!0},p(r,f){if(r[18]&&r[7]?g?(g.p(r,f),f[0]&262272&&b(g,1)):(g=_e(r),g.c(),b(g,1),g.m(e.parentNode,e)):g&&(X(),v(g,1,1,()=>{g=null}),V()),r[12]?s?(s.p(r,f),f[0]&4096&&b(s,1)):(s=de(r),s.c(),b(s,1),s.m(n,i)):s&&(X(),v(s,1,1,()=>{s=null}),V()),r[9]?m?(m.p(r,f),f[0]&512&&b(m,1)):(m=be(r),m.c(),b(m,1),m.m(n,a)):m&&(X(),v(m,1,1,()=>{m=null}),V()),f[0]&16386){w=$(r[14]);let d;for(d=0;d<w.length;d+=1){const I=ae(r,w,d);_[d]?(_[d].p(I,f),b(_[d],1)):(_[d]=pe(I),_[d].c(),b(_[d],1),_[d].m(n,null))}for(X(),d=w.length;d<_.length;d+=1)c(d);V()}(!u||f[0]&16)&&C(n,"--grid-cols",r[4]),(!u||f[0]&32)&&C(n,"--grid-rows",r[5]),(!u||f[0]&256)&&C(n,"--object-fit",r[8]),(!u||f[0]&64)&&C(n,"height",r[6]),(!u||f[0]&4)&&D(n,"pt-6",r[2]),(!u||f[0]&8192)&&D(t,"minimal",r[13]==="minimal"),(!u||f[0]&8256)&&D(t,"fixed-height",r[13]!=="minimal"&&(!r[6]||r[6]=="auto"))},i(r){if(!u){b(g),b(s),b(m);for(let f=0;f<w.length;f+=1)b(_[f]);u=!0}},o(r){v(g),v(s),v(m),_=_.filter(Boolean);for(let f=0;f<_.length;f+=1)v(_[f]);u=!1},d(r){r&&(R(e),R(t)),g&&g.d(r),s&&s.d(),m&&m.d(),ye(_,r)}}}function lt(l){let e,t;return e=new He({props:{unpadded_box:!0,size:"large",$$slots:{default:[nt]},$$scope:{ctx:l}}}),{c(){G(e.$$.fragment)},m(n,i){N(e,n,i),t=!0},p(n,i){const a={};i[1]&65536&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function _e(l){let e,t,n,i,a,u,g,s,m,w,_,c,r,f=l[10]&&me(l);i=new ve({props:{i18n:l[11],absolute:!1}}),i.$on("clear",l[29]),g=new te({props:{"data-testid":"detailed-image",src:l[18].image.url,alt:l[18].caption||"",title:l[18].caption||null,class:l[18].caption&&"with-caption",loading:"lazy"}});let d=l[18]?.caption&&he(l),I=$(l[14]),y=[];for(let h=0;h<I.length;h+=1)y[h]=ge(ue(l,I,h));const p=h=>v(y[h],1,1,()=>{y[h]=null});return{c(){e=T("button"),t=T("div"),f&&f.c(),n=U(),G(i.$$.fragment),a=U(),u=T("button"),G(g.$$.fragment),s=U(),d&&d.c(),m=U(),w=T("div");for(let h=0;h<y.length;h+=1)y[h].c();L(t,"class","icon-buttons svelte-eynlr2"),L(u,"class","image-button svelte-eynlr2"),C(u,"height","calc(100% - "+(l[18].caption?"80px":"60px")+")"),L(u,"aria-label","detailed view of selected image"),L(w,"class","thumbnails scroll-hide svelte-eynlr2"),L(w,"data-testid","container_el"),L(e,"class","preview svelte-eynlr2"),D(e,"minimal",l[13]==="minimal")},m(h,k){A(h,e,k),B(e,t),f&&f.m(t,null),B(t,n),N(i,t,null),B(e,a),B(e,u),N(g,u,null),B(e,s),d&&d.m(e,null),B(e,m),B(e,w);for(let S=0;S<y.length;S+=1)y[S]&&y[S].m(w,null);l[33](w),_=!0,c||(r=[Q(u,"click",l[30]),Q(e,"keydown",l[20])],c=!0)},p(h,k){h[10]?f?(f.p(h,k),k[0]&1024&&b(f,1)):(f=me(h),f.c(),b(f,1),f.m(t,n)):f&&(X(),v(f,1,1,()=>{f=null}),V());const S={};k[0]&2048&&(S.i18n=h[11]),i.$set(S);const q={};if(k[0]&262144&&(q.src=h[18].image.url),k[0]&262144&&(q.alt=h[18].caption||""),k[0]&262144&&(q.title=h[18].caption||null),k[0]&262144&&(q.class=h[18].caption&&"with-caption"),g.$set(q),(!_||k[0]&262144)&&C(u,"height","calc(100% - "+(h[18].caption?"80px":"60px")+")"),h[18]?.caption?d?d.p(h,k):(d=he(h),d.c(),d.m(e,m)):d&&(d.d(1),d=null),k[0]&57346){I=$(h[14]);let j;for(j=0;j<I.length;j+=1){const E=ue(h,I,j);y[j]?(y[j].p(E,k),b(y[j],1)):(y[j]=ge(E),y[j].c(),b(y[j],1),y[j].m(w,null))}for(X(),j=I.length;j<y.length;j+=1)p(j);V()}(!_||k[0]&8192)&&D(e,"minimal",h[13]==="minimal")},i(h){if(!_){b(f),b(i.$$.fragment,h),b(g.$$.fragment,h);for(let k=0;k<I.length;k+=1)b(y[k]);_=!0}},o(h){v(f),v(i.$$.fragment,h),v(g.$$.fragment,h),y=y.filter(Boolean);for(let k=0;k<y.length;k+=1)v(y[k]);_=!1},d(h){h&&R(e),f&&f.d(),M(i),M(g),d&&d.d(),ye(y,h),l[33](null),c=!1,Ze(r)}}}function me(l){let e,t,n;return t=new Ne({props:{Icon:Ve,label:l[11]("common.download")}}),t.$on("click",l[28]),{c(){e=T("div"),G(t.$$.fragment),L(e,"class","download-button-container svelte-eynlr2")},m(i,a){A(i,e,a),N(t,e,null),n=!0},p(i,a){const u={};a[0]&2048&&(u.label=i[11]("common.download")),t.$set(u)},i(i){n||(b(t.$$.fragment,i),n=!0)},o(i){v(t.$$.fragment,i),n=!1},d(i){i&&R(e),M(t)}}}function he(l){let e,t=l[18].caption+"",n;return{c(){e=T("caption"),n=Le(t),L(e,"class","caption svelte-eynlr2")},m(i,a){A(i,e,a),B(e,n)},p(i,a){a[0]&262144&&t!==(t=i[18].caption+"")&&je(n,t)},d(i){i&&R(e)}}}function ge(l){let e,t,n,i,a=l[44],u,g,s;t=new te({props:{src:l[45].image.url,title:l[45].caption||null,"data-testid":"thumbnail "+(l[44]+1),alt:"",loading:"lazy"}});const m=()=>l[31](e,a),w=()=>l[31](null,a);function _(){return l[32](l[44])}return{c(){e=T("button"),G(t.$$.fragment),n=U(),L(e,"class","thumbnail-item thumbnail-small svelte-eynlr2"),L(e,"aria-label",i="Thumbnail "+(l[44]+1)+" of "+l[14].length),D(e,"selected",l[1]===l[44]&&l[13]!=="minimal")},m(c,r){A(c,e,r),N(t,e,null),B(e,n),m(),u=!0,g||(s=Q(e,"click",_),g=!0)},p(c,r){l=c;const f={};r[0]&16384&&(f.src=l[45].image.url),r[0]&16384&&(f.title=l[45].caption||null),t.$set(f),(!u||r[0]&16384&&i!==(i="Thumbnail "+(l[44]+1)+" of "+l[14].length))&&L(e,"aria-label",i),a!==l[44]&&(w(),a=l[44],m()),(!u||r[0]&8194)&&D(e,"selected",l[1]===l[44]&&l[13]!=="minimal")},i(c){u||(b(t.$$.fragment,c),u=!0)},o(c){v(t.$$.fragment,c),u=!1},d(c){c&&R(e),M(t),w(),g=!1,s()}}}function de(l){let e,t,n;return t=new ve({props:{i18n:l[11],absolute:!1}}),t.$on("clear",l[34]),{c(){e=T("div"),G(t.$$.fragment),L(e,"class","icon-button svelte-eynlr2")},m(i,a){A(i,e,a),N(t,e,null),n=!0},p(i,a){const u={};a[0]&2048&&(u.i18n=i[11]),t.$set(u)},i(i){n||(b(t.$$.fragment,i),n=!0)},o(i){v(t.$$.fragment,i),n=!1},d(i){i&&R(e),M(t)}}}function be(l){let e,t,n;return t=new Pe({props:{i18n:l[11],value:l[14],formatter:Fe}}),t.$on("share",l[35]),t.$on("error",l[36]),{c(){e=T("div"),G(t.$$.fragment),L(e,"class","icon-button svelte-eynlr2")},m(i,a){A(i,e,a),N(t,e,null),n=!0},p(i,a){const u={};a[0]&2048&&(u.i18n=i[11]),a[0]&16384&&(u.value=i[14]),t.$set(u)},i(i){n||(b(t.$$.fragment,i),n=!0)},o(i){v(t.$$.fragment,i),n=!1},d(i){i&&R(e),M(t)}}}function we(l){let e,t=l[42].caption+"",n;return{c(){e=T("div"),n=Le(t),L(e,"class","caption-label svelte-eynlr2")},m(i,a){A(i,e,a),B(e,n)},p(i,a){a[0]&16384&&t!==(t=i[42].caption+"")&&je(n,t)},d(i){i&&R(e)}}}function pe(l){let e,t,n,i,a,u,g,s;t=new te({props:{alt:l[42].caption||"",src:typeof l[42].image=="string"?l[42].image:l[42].image.url,loading:"lazy"}});let m=l[42].caption&&we(l);function w(){return l[37](l[44])}return{c(){e=T("button"),G(t.$$.fragment),n=U(),m&&m.c(),i=U(),L(e,"class","thumbnail-item thumbnail-lg svelte-eynlr2"),L(e,"aria-label",a="Thumbnail "+(l[44]+1)+" of "+l[14].length),D(e,"selected",l[1]===l[44])},m(_,c){A(_,e,c),N(t,e,null),B(e,n),m&&m.m(e,null),B(e,i),u=!0,g||(s=Q(e,"click",w),g=!0)},p(_,c){l=_;const r={};c[0]&16384&&(r.alt=l[42].caption||""),c[0]&16384&&(r.src=typeof l[42].image=="string"?l[42].image:l[42].image.url),t.$set(r),l[42].caption?m?m.p(l,c):(m=we(l),m.c(),m.m(e,i)):m&&(m.d(1),m=null),(!u||c[0]&16384&&a!==(a="Thumbnail "+(l[44]+1)+" of "+l[14].length))&&L(e,"aria-label",a),(!u||c[0]&2)&&D(e,"selected",l[1]===l[44])},i(_){u||(b(t.$$.fragment,_),u=!0)},o(_){v(t.$$.fragment,_),u=!1},d(_){_&&R(e),M(t),m&&m.d(),g=!1,s()}}}function nt(l){let e,t;return e=new ke({}),{c(){G(e.$$.fragment)},m(n,i){N(e,n,i),t=!0},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function it(l){let e,t,n,i,a,u,g;Je(l[27]);let s=l[2]&&ce(l);const m=[lt,tt],w=[];function _(c,r){return c[0]==null||c[14]==null||c[14].length===0?0:1}return t=_(l),n=w[t]=m[t](l),{c(){s&&s.c(),e=U(),n.c(),i=Ke()},m(c,r){s&&s.m(c,r),A(c,e,r),w[t].m(c,r),A(c,i,r),a=!0,u||(g=Q(ze,"resize",l[27]),u=!0)},p(c,r){c[2]?s?(s.p(c,r),r[0]&4&&b(s,1)):(s=ce(c),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(X(),v(s,1,1,()=>{s=null}),V());let f=t;t=_(c),t===f?w[t].p(c,r):(X(),v(w[f],1,1,()=>{w[f]=null}),V(),n=w[t],n?n.p(c,r):(n=w[t]=m[t](c),n.c()),b(n,1),n.m(i.parentNode,i))},i(c){a||(b(s),b(n),a=!0)},o(c){v(s),v(n),a=!1},d(c){c&&(R(e),R(i)),s&&s.d(c),w[t].d(c),u=!1,g()}}}function rt(l,e,t){let n,i,a,{show_label:u=!0}=e,{label:g}=e,{value:s=null}=e,{columns:m=[2]}=e,{rows:w=void 0}=e,{height:_="auto"}=e,{preview:c}=e,{allow_preview:r=!0}=e,{object_fit:f="cover"}=e,{show_share_button:d=!1}=e,{show_download_button:I=!1}=e,{i18n:y}=e,{selected_index:p=null}=e,{interactive:h}=e,{_fetch:k}=e,{mode:S="normal"}=e;const q=xe();let j=!0,E=null,x=s;p==null&&c&&s?.length&&(p=0);let ee=p;function le(o){const O=o.target,P=o.offsetX,W=O.offsetWidth/2;P<W?t(1,p=n):t(1,p=i)}function Be(o){switch(o.code){case"Escape":o.preventDefault(),t(1,p=null);break;case"ArrowLeft":o.preventDefault(),t(1,p=n);break;case"ArrowRight":o.preventDefault(),t(1,p=i);break}}let F=[],H;async function Ie(o){if(typeof o!="number"||(await et(),F[o]===void 0))return;F[o]?.focus();const{left:O,width:P}=H.getBoundingClientRect(),{left:Y,width:W}=F[o].getBoundingClientRect(),J=Y-O+W/2-P/2+H.scrollLeft;H&&typeof H.scrollTo=="function"&&H.scrollTo({left:J<0?0:J,behavior:"smooth"})}let ne=0;async function ie(o,O){let P;try{P=await k(o)}catch(J){if(J instanceof TypeError){window.open(o,"_blank","noreferrer");return}throw J}const Y=await P.blob(),W=URL.createObjectURL(Y),Z=document.createElement("a");Z.href=W,Z.download=O,Z.click(),URL.revokeObjectURL(W)}function Te(){t(17,ne=ze.innerHeight)}const De=()=>{const o=a?.image;if(o==null)return;const{url:O,orig_name:P}=o;O&&ie(O,P??"image")},Re=()=>t(1,p=null),Ae=o=>le(o);function Ee(o,O){se[o?"unshift":"push"](()=>{F[O]=o,t(15,F)})}const Ue=o=>t(1,p=o);function Se(o){se[o?"unshift":"push"](()=>{H=o,t(16,H)})}const Oe=()=>t(0,s=null);function Ce(o){fe.call(this,l,o)}function Ge(o){fe.call(this,l,o)}const Me=o=>t(1,p=o);return l.$$set=o=>{"show_label"in o&&t(2,u=o.show_label),"label"in o&&t(3,g=o.label),"value"in o&&t(0,s=o.value),"columns"in o&&t(4,m=o.columns),"rows"in o&&t(5,w=o.rows),"height"in o&&t(6,_=o.height),"preview"in o&&t(22,c=o.preview),"allow_preview"in o&&t(7,r=o.allow_preview),"object_fit"in o&&t(8,f=o.object_fit),"show_share_button"in o&&t(9,d=o.show_share_button),"show_download_button"in o&&t(10,I=o.show_download_button),"i18n"in o&&t(11,y=o.i18n),"selected_index"in o&&t(1,p=o.selected_index),"interactive"in o&&t(12,h=o.interactive),"_fetch"in o&&t(23,k=o._fetch),"mode"in o&&t(13,S=o.mode)},l.$$.update=()=>{l.$$.dirty[0]&16777217&&t(24,j=s==null||s.length===0?!0:j),l.$$.dirty[0]&1&&t(14,E=s==null?null:s.map(o=>({image:o.image,caption:o.caption}))),l.$$.dirty[0]&54525955&&(K(x,s)||(j?(t(1,p=c&&s?.length?0:null),t(24,j=!1)):t(1,p=p!=null&&s!=null&&p<s.length?p:null),q("change"),t(25,x=s))),l.$$.dirty[0]&16386&&(n=((p??0)+(E?.length??0)-1)%(E?.length??0)),l.$$.dirty[0]&16386&&(i=((p??0)+1)%(E?.length??0)),l.$$.dirty[0]&67125250&&p!==ee&&(t(26,ee=p),p!==null&&q("select",{index:p,value:E?.[p]})),l.$$.dirty[0]&130&&r&&Ie(p),l.$$.dirty[0]&16386&&t(18,a=p!=null&&E!=null?E[p]:null)},[s,p,u,g,m,w,_,r,f,d,I,y,h,S,E,F,H,ne,a,le,Be,ie,c,k,j,x,ee,Te,De,Re,Ae,Ee,Ue,Se,Oe,Ce,Ge,Me]}class jt extends We{constructor(e){super(),Ye(this,e,rt,it,$e,{show_label:2,label:3,value:0,columns:4,rows:5,height:6,preview:22,allow_preview:7,object_fit:8,show_share_button:9,show_download_button:10,i18n:11,selected_index:1,interactive:12,_fetch:23,mode:13},null,[-1,-1])}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),z()}get label(){return this.$$.ctx[3]}set label(e){this.$$set({label:e}),z()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),z()}get columns(){return this.$$.ctx[4]}set columns(e){this.$$set({columns:e}),z()}get rows(){return this.$$.ctx[5]}set rows(e){this.$$set({rows:e}),z()}get height(){return this.$$.ctx[6]}set height(e){this.$$set({height:e}),z()}get preview(){return this.$$.ctx[22]}set preview(e){this.$$set({preview:e}),z()}get allow_preview(){return this.$$.ctx[7]}set allow_preview(e){this.$$set({allow_preview:e}),z()}get object_fit(){return this.$$.ctx[8]}set object_fit(e){this.$$set({object_fit:e}),z()}get show_share_button(){return this.$$.ctx[9]}set show_share_button(e){this.$$set({show_share_button:e}),z()}get show_download_button(){return this.$$.ctx[10]}set show_download_button(e){this.$$set({show_download_button:e}),z()}get i18n(){return this.$$.ctx[11]}set i18n(e){this.$$set({i18n:e}),z()}get selected_index(){return this.$$.ctx[1]}set selected_index(e){this.$$set({selected_index:e}),z()}get interactive(){return this.$$.ctx[12]}set interactive(e){this.$$set({interactive:e}),z()}get _fetch(){return this.$$.ctx[23]}set _fetch(e){this.$$set({_fetch:e}),z()}get mode(){return this.$$.ctx[13]}set mode(e){this.$$set({mode:e}),z()}}export{jt as default};
//# sourceMappingURL=Gallery-CGn-AVyf.js.map
