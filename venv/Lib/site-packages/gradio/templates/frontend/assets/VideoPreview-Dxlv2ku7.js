import{I as $t}from"./Index-HnsngA2K.js";import{B as St}from"./BlockLabel-du95yTCe.js";import{E as Vt}from"./Empty-B-q4dRI6.js";import{S as Dt}from"./ShareButton-D7_uro_U.js";import{D as qt}from"./Download-DVtk-Jv3.js";import{V as kt}from"./Video-fsmLZWjA.js";import{f as _e,u as Ct}from"./Blocks-BW0LI6Mk.js";import{D as Rt}from"./DownloadLink-CVlM3uy0.js";import{T as Lt,P as Mt,a as Pt}from"./Trim-UKwaW4UI.js";import{U as yt}from"./Undo-CpmTQw3B.js";import{b as Bt,t as At,V as Ht}from"./Video-D0vo_7Ac.js";import{p as Xt}from"./index-DfiasXCI.js";const{SvelteComponent:It,append:Nt,attr:j,detach:Ut,init:jt,insert:Ft,noop:je,safe_not_equal:Ot,svg_element:tt}=window.__gradio__svelte__internal;function zt(i){let e,n;return{c(){e=tt("svg"),n=tt("path"),j(n,"d","M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"),j(e,"xmlns","http://www.w3.org/2000/svg"),j(e,"width","100%"),j(e,"height","100%"),j(e,"viewBox","0 0 24 24"),j(e,"fill","none"),j(e,"stroke","currentColor"),j(e,"stroke-width","1.5"),j(e,"stroke-linecap","round"),j(e,"stroke-linejoin","round")},m(t,l){Ft(t,e,l),Nt(e,n)},p:je,i:je,o:je,d(t){t&&Ut(e)}}}class Wt extends It{constructor(e){super(),jt(this,e,null,zt,Ot,{})}}const{SvelteComponent:Gt,append:de,attr:q,destroy_block:Jt,detach:Xe,element:re,ensure_array_like:nt,flush:pe,init:Kt,insert:Ie,listen:fe,noop:Ge,run_all:Qt,safe_not_equal:Yt,set_style:ee,space:Fe,src_url_equal:it,update_keyed_each:Zt}=window.__gradio__svelte__internal,{onMount:lt,onDestroy:xt}=window.__gradio__svelte__internal;function ot(i,e,n){const t=i.slice();return t[20]=e[n],t[22]=n,t}function en(i){let e,n,t,l,r,o=[],u=new Map,s,_,a,h,m=nt(i[1]);const d=c=>c[22];for(let c=0;c<m.length;c+=1){let g=ot(i,m,c),w=d(g);u.set(w,o[c]=rt(w,g))}return{c(){e=re("div"),n=re("button"),t=Fe(),l=re("div"),r=Fe();for(let c=0;c<o.length;c+=1)o[c].c();s=Fe(),_=re("button"),q(n,"aria-label","start drag handle for trimming video"),q(n,"class","handle left svelte-10c4beq"),ee(n,"left",i[2]+"%"),q(l,"class","opaque-layer svelte-10c4beq"),ee(l,"left",i[2]+"%"),ee(l,"right",100-i[3]+"%"),q(_,"aria-label","end drag handle for trimming video"),q(_,"class","handle right svelte-10c4beq"),ee(_,"left",i[3]+"%"),q(e,"id","timeline"),q(e,"class","thumbnail-wrapper svelte-10c4beq")},m(c,g){Ie(c,e,g),de(e,n),de(e,t),de(e,l),de(e,r);for(let w=0;w<o.length;w+=1)o[w]&&o[w].m(e,null);de(e,s),de(e,_),a||(h=[fe(n,"mousedown",i[10]),fe(n,"blur",i[5]),fe(n,"keydown",i[11]),fe(_,"mousedown",i[12]),fe(_,"blur",i[5]),fe(_,"keydown",i[13])],a=!0)},p(c,g){g&4&&ee(n,"left",c[2]+"%"),g&4&&ee(l,"left",c[2]+"%"),g&8&&ee(l,"right",100-c[3]+"%"),g&2&&(m=nt(c[1]),o=Zt(o,g,d,1,c,m,u,e,Jt,rt,s,ot)),g&8&&ee(_,"left",c[3]+"%")},d(c){c&&Xe(e);for(let g=0;g<o.length;g+=1)o[g].d();a=!1,Qt(h)}}}function tn(i){let e;return{c(){e=re("div"),e.innerHTML='<span aria-label="loading timeline" class="loader svelte-10c4beq"></span>',q(e,"class","load-wrap svelte-10c4beq")},m(n,t){Ie(n,e,t)},p:Ge,d(n){n&&Xe(e)}}}function rt(i,e){let n,t,l;return{key:i,first:null,c(){n=re("img"),it(n.src,t=e[20])||q(n,"src",t),q(n,"alt",l=`frame-${e[22]}`),q(n,"draggable","false"),q(n,"class","svelte-10c4beq"),this.first=n},m(r,o){Ie(r,n,o)},p(r,o){e=r,o&2&&!it(n.src,t=e[20])&&q(n,"src",t),o&2&&l!==(l=`frame-${e[22]}`)&&q(n,"alt",l)},d(r){r&&Xe(n)}}}function nn(i){let e;function n(r,o){return r[0]?tn:en}let t=n(i),l=t(i);return{c(){e=re("div"),l.c(),q(e,"class","container svelte-10c4beq")},m(r,o){Ie(r,e,o),l.m(e,null)},p(r,[o]){t===(t=n(r))&&l?l.p(r,o):(l.d(1),l=t(r),l&&(l.c(),l.m(e,null)))},i:Ge,o:Ge,d(r){r&&Xe(e),l.d()}}}let Oe=10;function ln(i,e,n){let{videoElement:t}=e,{trimmedDuration:l}=e,{dragStart:r}=e,{dragEnd:o}=e,{loadingTimeline:u}=e,s=[],_,a=0,h=100,m=null;const d=f=>{m=f},c=()=>{m=null},g=(f,b)=>{if(m){const P=document.getElementById("timeline");if(!P)return;const E=P.getBoundingClientRect();let D=(f.clientX-E.left)/E.width*100;if(b?D=m==="left"?a+b:h+b:D=(f.clientX-E.left)/E.width*100,D=Math.max(0,Math.min(D,100)),m==="left"){n(2,a=Math.min(D,h));const V=a/100*_;n(6,t.currentTime=V,t),n(8,r=V)}else if(m==="right"){n(3,h=Math.max(D,a));const V=h/100*_;n(6,t.currentTime=V,t),n(9,o=V)}const te=a/100*_,J=h/100*_;n(7,l=J-te),n(2,a),n(3,h)}},w=f=>{if(m){const b=1/_*100;f.key==="ArrowLeft"?g({clientX:0},-b):f.key==="ArrowRight"&&g({clientX:0},b)}},k=()=>{const f=document.createElement("canvas"),b=f.getContext("2d");if(!b)return;f.width=t.videoWidth,f.height=t.videoHeight,b.drawImage(t,0,0,f.width,f.height);const P=f.toDataURL("image/jpeg",.7);n(1,s=[...s,P])};lt(()=>{const f=()=>{_=t.duration;const b=_/Oe;let P=0;const E=()=>{k(),P++,P<Oe?n(6,t.currentTime+=b,t):t.removeEventListener("seeked",E)};t.addEventListener("seeked",E),n(6,t.currentTime=0,t)};t.readyState>=1?f():t.addEventListener("loadedmetadata",f)}),xt(()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",c),window.removeEventListener("keydown",w)}),lt(()=>{window.addEventListener("mousemove",g),window.addEventListener("mouseup",c),window.addEventListener("keydown",w)});const B=()=>d("left"),A=f=>{(f.key==="ArrowLeft"||f.key=="ArrowRight")&&d("left")},H=()=>d("right"),X=f=>{(f.key==="ArrowLeft"||f.key=="ArrowRight")&&d("right")};return i.$$set=f=>{"videoElement"in f&&n(6,t=f.videoElement),"trimmedDuration"in f&&n(7,l=f.trimmedDuration),"dragStart"in f&&n(8,r=f.dragStart),"dragEnd"in f&&n(9,o=f.dragEnd),"loadingTimeline"in f&&n(0,u=f.loadingTimeline)},i.$$.update=()=>{i.$$.dirty&2&&n(0,u=s.length!==Oe)},[u,s,a,h,d,c,t,l,r,o,B,A,H,X]}class on extends Gt{constructor(e){super(),Kt(this,e,ln,nn,Yt,{videoElement:6,trimmedDuration:7,dragStart:8,dragEnd:9,loadingTimeline:0})}get videoElement(){return this.$$.ctx[6]}set videoElement(e){this.$$set({videoElement:e}),pe()}get trimmedDuration(){return this.$$.ctx[7]}set trimmedDuration(e){this.$$set({trimmedDuration:e}),pe()}get dragStart(){return this.$$.ctx[8]}set dragStart(e){this.$$set({dragStart:e}),pe()}get dragEnd(){return this.$$.ctx[9]}set dragEnd(e){this.$$set({dragEnd:e}),pe()}get loadingTimeline(){return this.$$.ctx[0]}set loadingTimeline(e){this.$$set({loadingTimeline:e}),pe()}}const{SvelteComponent:rn,add_flush_callback:$e,append:ce,attr:M,bind:Se,binding_callbacks:Ve,check_outros:De,create_component:Qe,destroy_component:Ye,detach:z,element:W,empty:sn,flush:ie,group_outros:qe,init:an,insert:G,listen:Be,mount_component:Ze,noop:Je,run_all:un,safe_not_equal:dn,set_data:fn,space:Ce,text:cn,toggle_class:me,transition_in:L,transition_out:N}=window.__gradio__svelte__internal,{onMount:_n}=window.__gradio__svelte__internal;function st(i){let e,n,t,l,r,o,u;function s(d){i[13](d)}function _(d){i[14](d)}function a(d){i[15](d)}function h(d){i[16](d)}let m={videoElement:i[2]};return i[9]!==void 0&&(m.dragStart=i[9]),i[10]!==void 0&&(m.dragEnd=i[10]),i[7]!==void 0&&(m.trimmedDuration=i[7]),i[11]!==void 0&&(m.loadingTimeline=i[11]),n=new on({props:m}),Ve.push(()=>Se(n,"dragStart",s)),Ve.push(()=>Se(n,"dragEnd",_)),Ve.push(()=>Se(n,"trimmedDuration",a)),Ve.push(()=>Se(n,"loadingTimeline",h)),{c(){e=W("div"),Qe(n.$$.fragment),M(e,"class","timeline-wrapper svelte-sxyn79")},m(d,c){G(d,e,c),Ze(n,e,null),u=!0},p(d,c){const g={};c&4&&(g.videoElement=d[2]),!t&&c&512&&(t=!0,g.dragStart=d[9],$e(()=>t=!1)),!l&&c&1024&&(l=!0,g.dragEnd=d[10],$e(()=>l=!1)),!r&&c&128&&(r=!0,g.trimmedDuration=d[7],$e(()=>r=!1)),!o&&c&2048&&(o=!0,g.loadingTimeline=d[11],$e(()=>o=!1)),n.$set(g)},i(d){u||(L(n.$$.fragment,d),u=!0)},o(d){N(n.$$.fragment,d),u=!1},d(d){d&&z(e),Ye(n)}}}function mn(i){let e;return{c(){e=W("div"),M(e,"class","svelte-sxyn79")},m(n,t){G(n,e,t)},p:Je,d(n){n&&z(e)}}}function hn(i){let e,n=_e(i[7])+"",t;return{c(){e=W("time"),t=cn(n),M(e,"aria-label","duration of selected region in seconds"),M(e,"class","svelte-sxyn79"),me(e,"hidden",i[11])},m(l,r){G(l,e,r),ce(e,t)},p(l,r){r&128&&n!==(n=_e(l[7])+"")&&fn(t,n),r&2048&&me(e,"hidden",l[11])},d(l){l&&z(e)}}}function at(i){let e,n,t,l,r;return n=new yt({}),{c(){e=W("button"),Qe(n.$$.fragment),M(e,"class","action icon svelte-sxyn79"),e.disabled=i[1],M(e,"aria-label","Reset video to initial value")},m(o,u){G(o,e,u),Ze(n,e,null),t=!0,l||(r=Be(e,"click",i[17]),l=!0)},p(o,u){(!t||u&2)&&(e.disabled=o[1])},i(o){t||(L(n.$$.fragment,o),t=!0)},o(o){N(n.$$.fragment,o),t=!1},d(o){o&&z(e),Ye(n),l=!1,r()}}}function ut(i){let e,n,t,l;const r=[bn,gn],o=[];function u(s,_){return s[0]===""?0:1}return e=u(i),n=o[e]=r[e](i),{c(){n.c(),t=sn()},m(s,_){o[e].m(s,_),G(s,t,_),l=!0},p(s,_){let a=e;e=u(s),e===a?o[e].p(s,_):(qe(),N(o[a],1,1,()=>{o[a]=null}),De(),n=o[e],n?n.p(s,_):(n=o[e]=r[e](s),n.c()),L(n,1),n.m(t.parentNode,t))},i(s){l||(L(n),l=!0)},o(s){N(n),l=!1},d(s){s&&z(t),o[e].d(s)}}}function gn(i){let e,n,t,l,r;return{c(){e=W("button"),e.textContent="Trim",n=Ce(),t=W("button"),t.textContent="Cancel",M(e,"class","text-button svelte-sxyn79"),me(e,"hidden",i[11]),M(t,"class","text-button svelte-sxyn79"),me(t,"hidden",i[11])},m(o,u){G(o,e,u),G(o,n,u),G(o,t,u),l||(r=[Be(e,"click",i[18]),Be(t,"click",i[12])],l=!0)},p(o,u){u&2048&&me(e,"hidden",o[11]),u&2048&&me(t,"hidden",o[11])},i:Je,o:Je,d(o){o&&(z(e),z(n),z(t)),l=!1,un(r)}}}function bn(i){let e,n,t,l,r;return n=new Lt({}),{c(){e=W("button"),Qe(n.$$.fragment),e.disabled=i[1],M(e,"class","action icon svelte-sxyn79"),M(e,"aria-label","Trim video to selection")},m(o,u){G(o,e,u),Ze(n,e,null),t=!0,l||(r=Be(e,"click",i[12]),l=!0)},p(o,u){(!t||u&2)&&(e.disabled=o[1])},i(o){t||(L(n.$$.fragment,o),t=!0)},o(o){N(n.$$.fragment,o),t=!1},d(o){o&&z(e),Ye(n),l=!1,r()}}}function vn(i){let e,n,t,l,r,o,u,s=i[0]==="edit"&&st(i);function _(c,g){return c[0]==="edit"&&c[7]!==null?hn:mn}let a=_(i),h=a(i),m=i[3]&&i[0]===""&&at(i),d=i[4]&&ut(i);return{c(){e=W("div"),s&&s.c(),n=Ce(),t=W("div"),h.c(),l=Ce(),r=W("div"),m&&m.c(),o=Ce(),d&&d.c(),M(r,"class","settings-wrapper svelte-sxyn79"),M(t,"class","controls svelte-sxyn79"),M(t,"data-testid","waveform-controls"),M(e,"class","container svelte-sxyn79")},m(c,g){G(c,e,g),s&&s.m(e,null),ce(e,n),ce(e,t),h.m(t,null),ce(t,l),ce(t,r),m&&m.m(r,null),ce(r,o),d&&d.m(r,null),u=!0},p(c,[g]){c[0]==="edit"?s?(s.p(c,g),g&1&&L(s,1)):(s=st(c),s.c(),L(s,1),s.m(e,n)):s&&(qe(),N(s,1,1,()=>{s=null}),De()),a===(a=_(c))&&h?h.p(c,g):(h.d(1),h=a(c),h&&(h.c(),h.m(t,l))),c[3]&&c[0]===""?m?(m.p(c,g),g&9&&L(m,1)):(m=at(c),m.c(),L(m,1),m.m(r,o)):m&&(qe(),N(m,1,1,()=>{m=null}),De()),c[4]?d?(d.p(c,g),g&16&&L(d,1)):(d=ut(c),d.c(),L(d,1),d.m(r,null)):d&&(qe(),N(d,1,1,()=>{d=null}),De())},i(c){u||(L(s),L(m),L(d),u=!0)},o(c){N(s),N(m),N(d),u=!1},d(c){c&&z(e),s&&s.d(),h.d(),m&&m.d(),d&&d.d()}}}function pn(i,e,n){let{videoElement:t}=e,{showRedo:l=!1}=e,{interactive:r=!0}=e,{mode:o=""}=e,{handle_reset_value:u}=e,{handle_trim_video:s}=e,{processingVideo:_=!1}=e,a;_n(async()=>{n(8,a=await Bt())});let h=null,m=0,d=0,c=!1;const g=()=>{o==="edit"?(n(0,o=""),n(7,h=t.duration)):n(0,o="edit")};function w(f){m=f,n(9,m)}function k(f){d=f,n(10,d)}function B(f){h=f,n(7,h),n(0,o),n(2,t)}function A(f){c=f,n(11,c)}const H=()=>{u(),n(0,o="")},X=()=>{n(0,o=""),n(1,_=!0),At(a,m,d,t).then(f=>{s(f)}).then(()=>{n(1,_=!1)})};return i.$$set=f=>{"videoElement"in f&&n(2,t=f.videoElement),"showRedo"in f&&n(3,l=f.showRedo),"interactive"in f&&n(4,r=f.interactive),"mode"in f&&n(0,o=f.mode),"handle_reset_value"in f&&n(5,u=f.handle_reset_value),"handle_trim_video"in f&&n(6,s=f.handle_trim_video),"processingVideo"in f&&n(1,_=f.processingVideo)},i.$$.update=()=>{i.$$.dirty&133&&o==="edit"&&h===null&&t&&n(7,h=t.duration)},[o,_,t,l,r,u,s,h,a,m,d,c,g,w,k,B,A,H,X]}class wn extends rn{constructor(e){super(),an(this,e,pn,vn,dn,{videoElement:2,showRedo:3,interactive:4,mode:0,handle_reset_value:5,handle_trim_video:6,processingVideo:1})}get videoElement(){return this.$$.ctx[2]}set videoElement(e){this.$$set({videoElement:e}),ie()}get showRedo(){return this.$$.ctx[3]}set showRedo(e){this.$$set({showRedo:e}),ie()}get interactive(){return this.$$.ctx[4]}set interactive(e){this.$$set({interactive:e}),ie()}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),ie()}get handle_reset_value(){return this.$$.ctx[5]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),ie()}get handle_trim_video(){return this.$$.ctx[6]}set handle_trim_video(e){this.$$set({handle_trim_video:e}),ie()}get processingVideo(){return this.$$.ctx[1]}set processingVideo(e){this.$$set({processingVideo:e}),ie()}}const{SvelteComponent:kn,add_flush_callback:ke,append:R,attr:$,bind:ye,binding_callbacks:Ee,bubble:ze,check_outros:dt,create_component:he,destroy_component:ge,detach:Re,element:Y,empty:yn,flush:F,group_outros:ft,init:En,insert:Le,listen:le,mount_component:be,prevent_default:ct,run_all:Tn,safe_not_equal:$n,set_data:_t,space:we,src_url_equal:mt,stop_propagation:Sn,text:We,toggle_class:ht,transition_in:I,transition_out:O}=window.__gradio__svelte__internal,{createEventDispatcher:Vn}=window.__gradio__svelte__internal;function Dn(i){let e,n;return{c(){e=Y("track"),$(e,"kind","captions"),mt(e.src,n=i[1])||$(e,"src",n),e.default=!0},m(t,l){Le(t,e,l)},p(t,l){l&2&&!mt(e.src,n=t[1])&&$(e,"src",n)},d(t){t&&Re(e)}}}function qn(i){let e,n;return e=new Mt({}),{c(){he(e.$$.fragment)},m(t,l){be(e,t,l),n=!0},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){ge(e,t)}}}function Cn(i){let e,n;return e=new Pt({}),{c(){he(e.$$.fragment)},m(t,l){be(e,t,l),n=!0},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){ge(e,t)}}}function Rn(i){let e,n;return e=new yt({}),{c(){he(e.$$.fragment)},m(t,l){be(e,t,l),n=!0},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){ge(e,t)}}}function gt(i){let e,n,t;function l(o){i[28](o)}let r={videoElement:i[10],showRedo:!0,handle_trim_video:i[16],handle_reset_value:i[6]};return i[11]!==void 0&&(r.processingVideo=i[11]),e=new wn({props:r}),Ee.push(()=>ye(e,"processingVideo",l)),{c(){he(e.$$.fragment)},m(o,u){be(e,o,u),t=!0},p(o,u){const s={};u&1024&&(s.videoElement=o[10]),u&64&&(s.handle_reset_value=o[6]),!n&&u&2048&&(n=!0,s.processingVideo=o[11],ke(()=>n=!1)),e.$set(s)},i(o){t||(I(e.$$.fragment,o),t=!0)},o(o){O(e.$$.fragment,o),t=!1},d(o){ge(e,o)}}}function Ln(i){let e,n,t,l,r,o,u,s,_,a,h,m,d,c,g,w=_e(i[7])+"",k,B,A=_e(i[8])+"",H,X,f,b,P,E,D,te,J,V,ve,Te;function Ne(p){i[21](p)}function v(p){i[22](p)}function Z(p){i[23](p)}function x(p){i[24](p)}let K={src:i[0],preload:"auto",autoplay:i[3],"data-testid":`${i[4]}-player`,processingVideo:i[11],$$slots:{default:[Dn]},$$scope:{ctx:i}};i[7]!==void 0&&(K.currentTime=i[7]),i[8]!==void 0&&(K.duration=i[8]),i[9]!==void 0&&(K.paused=i[9]),i[10]!==void 0&&(K.node=i[10]),t=new Ht({props:K}),Ee.push(()=>ye(t,"currentTime",Ne)),Ee.push(()=>ye(t,"duration",v)),Ee.push(()=>ye(t,"paused",Z)),Ee.push(()=>ye(t,"node",x)),t.$on("click",i[13]),t.$on("play",i[25]),t.$on("pause",i[26]),t.$on("ended",i[15]),t.$on("load",i[27]);const xe=[Rn,Cn,qn],ne=[];function et(p,y){return p[7]===p[8]?0:p[9]?1:2}m=et(i),d=ne[m]=xe[m](i),D=new Wt({});let T=i[5]&&gt(i);return{c(){e=Y("div"),n=Y("div"),he(t.$$.fragment),s=we(),_=Y("div"),a=Y("div"),h=Y("span"),d.c(),c=we(),g=Y("span"),k=We(w),B=We(" / "),H=We(A),X=we(),f=Y("progress"),P=we(),E=Y("div"),he(D.$$.fragment),te=we(),T&&T.c(),J=yn(),$(n,"class","mirror-wrap svelte-euo1cw"),ht(n,"mirror",i[2]),$(h,"role","button"),$(h,"tabindex","0"),$(h,"class","icon svelte-euo1cw"),$(h,"aria-label","play-pause-replay-button"),$(g,"class","time svelte-euo1cw"),f.value=b=i[7]/i[8]||0,$(f,"class","svelte-euo1cw"),$(E,"role","button"),$(E,"tabindex","0"),$(E,"class","icon svelte-euo1cw"),$(E,"aria-label","full-screen"),$(a,"class","inner svelte-euo1cw"),$(_,"class","controls svelte-euo1cw"),$(e,"class","wrap svelte-euo1cw")},m(p,y){Le(p,e,y),R(e,n),be(t,n,null),R(e,s),R(e,_),R(_,a),R(a,h),ne[m].m(h,null),R(a,c),R(a,g),R(g,k),R(g,B),R(g,H),R(a,X),R(a,f),R(a,P),R(a,E),be(D,E,null),Le(p,te,y),T&&T.m(p,y),Le(p,J,y),V=!0,ve||(Te=[le(h,"click",i[13]),le(h,"keydown",i[13]),le(f,"mousemove",i[12]),le(f,"touchmove",ct(i[12])),le(f,"click",Sn(ct(i[14]))),le(E,"click",i[17]),le(E,"keypress",i[17])],ve=!0)},p(p,[y]){const U={};y&1&&(U.src=p[0]),y&8&&(U.autoplay=p[3]),y&16&&(U["data-testid"]=`${p[4]}-player`),y&2048&&(U.processingVideo=p[11]),y&1073741826&&(U.$$scope={dirty:y,ctx:p}),!l&&y&128&&(l=!0,U.currentTime=p[7],ke(()=>l=!1)),!r&&y&256&&(r=!0,U.duration=p[8],ke(()=>r=!1)),!o&&y&512&&(o=!0,U.paused=p[9],ke(()=>o=!1)),!u&&y&1024&&(u=!0,U.node=p[10],ke(()=>u=!1)),t.$set(U),(!V||y&4)&&ht(n,"mirror",p[2]);let Ue=m;m=et(p),m!==Ue&&(ft(),O(ne[Ue],1,1,()=>{ne[Ue]=null}),dt(),d=ne[m],d||(d=ne[m]=xe[m](p),d.c()),I(d,1),d.m(h,null)),(!V||y&128)&&w!==(w=_e(p[7])+"")&&_t(k,w),(!V||y&256)&&A!==(A=_e(p[8])+"")&&_t(H,A),(!V||y&384&&b!==(b=p[7]/p[8]||0))&&(f.value=b),p[5]?T?(T.p(p,y),y&32&&I(T,1)):(T=gt(p),T.c(),I(T,1),T.m(J.parentNode,J)):T&&(ft(),O(T,1,1,()=>{T=null}),dt())},i(p){V||(I(t.$$.fragment,p),I(d),I(D.$$.fragment,p),I(T),V=!0)},o(p){O(t.$$.fragment,p),O(d),O(D.$$.fragment,p),O(T),V=!1},d(p){p&&(Re(e),Re(te),Re(J)),ge(t),ne[m].d(),ge(D),T&&T.d(p),ve=!1,Tn(Te)}}}function Mn(i,e,n){let{root:t=""}=e,{src:l}=e,{subtitle:r=null}=e,{mirror:o}=e,{autoplay:u}=e,{label:s="test"}=e,{interactive:_=!1}=e,{handle_change:a=()=>{}}=e,{handle_reset_value:h=()=>{}}=e,{upload:m}=e;const d=Vn();let c=0,g,w=!0,k,B=!1;function A(v){if(!g)return;if(v.type==="click"){X(v);return}if(v.type!=="touchmove"&&!(v.buttons&1))return;const Z=v.type==="touchmove"?v.touches[0].clientX:v.clientX,{left:x,right:K}=v.currentTarget.getBoundingClientRect();n(7,c=g*(Z-x)/(K-x))}async function H(){document.fullscreenElement!=k&&(k.currentTime>0&&!k.paused&&!k.ended&&k.readyState>k.HAVE_CURRENT_DATA?k.pause():await k.play())}function X(v){const{left:Z,right:x}=v.currentTarget.getBoundingClientRect();n(7,c=g*(v.clientX-Z)/(x-Z))}function f(){d("stop"),d("end")}const b=async v=>{let Z=new File([v],"video.mp4");const x=await Xt([Z]);let K=(await m(x,t))?.filter(Boolean)[0];a(K)};function P(){k.requestFullscreen()}function E(v){c=v,n(7,c)}function D(v){g=v,n(8,g)}function te(v){w=v,n(9,w)}function J(v){k=v,n(10,k)}function V(v){ze.call(this,i,v)}function ve(v){ze.call(this,i,v)}function Te(v){ze.call(this,i,v)}function Ne(v){B=v,n(11,B)}return i.$$set=v=>{"root"in v&&n(18,t=v.root),"src"in v&&n(0,l=v.src),"subtitle"in v&&n(1,r=v.subtitle),"mirror"in v&&n(2,o=v.mirror),"autoplay"in v&&n(3,u=v.autoplay),"label"in v&&n(4,s=v.label),"interactive"in v&&n(5,_=v.interactive),"handle_change"in v&&n(19,a=v.handle_change),"handle_reset_value"in v&&n(6,h=v.handle_reset_value),"upload"in v&&n(20,m=v.upload)},[l,r,o,u,s,_,h,c,g,w,k,B,A,H,X,f,b,P,t,a,m,E,D,te,J,V,ve,Te,Ne]}class Pn extends kn{constructor(e){super(),En(this,e,Mn,Ln,$n,{root:18,src:0,subtitle:1,mirror:2,autoplay:3,label:4,interactive:5,handle_change:19,handle_reset_value:6,upload:20})}get root(){return this.$$.ctx[18]}set root(e){this.$$set({root:e}),F()}get src(){return this.$$.ctx[0]}set src(e){this.$$set({src:e}),F()}get subtitle(){return this.$$.ctx[1]}set subtitle(e){this.$$set({subtitle:e}),F()}get mirror(){return this.$$.ctx[2]}set mirror(e){this.$$set({mirror:e}),F()}get autoplay(){return this.$$.ctx[3]}set autoplay(e){this.$$set({autoplay:e}),F()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),F()}get interactive(){return this.$$.ctx[5]}set interactive(e){this.$$set({interactive:e}),F()}get handle_change(){return this.$$.ctx[19]}set handle_change(e){this.$$set({handle_change:e}),F()}get handle_reset_value(){return this.$$.ctx[6]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),F()}get upload(){return this.$$.ctx[20]}set upload(e){this.$$set({upload:e}),F()}}const Bn=Pn,{SvelteComponent:An,append:Hn,attr:bt,bubble:oe,check_outros:Me,create_component:se,destroy_component:ae,detach:Ae,element:Xn,empty:In,flush:Q,group_outros:Pe,init:Nn,insert:He,mount_component:ue,noop:Et,safe_not_equal:Tt,space:Ke,transition_in:S,transition_out:C}=window.__gradio__svelte__internal,{createEventDispatcher:Un,afterUpdate:jn,tick:Fn}=window.__gradio__svelte__internal;function On(i){let e=i[0].url,n,t,l,r,o=vt(i),u=i[6]&&pt(i),s=i[5]&&wt(i);return{c(){o.c(),n=Ke(),t=Xn("div"),u&&u.c(),l=Ke(),s&&s.c(),bt(t,"class","icon-buttons svelte-rvdo70"),bt(t,"data-testid","download-div")},m(_,a){o.m(_,a),He(_,n,a),He(_,t,a),u&&u.m(t,null),Hn(t,l),s&&s.m(t,null),r=!0},p(_,a){a&1&&Tt(e,e=_[0].url)?(Pe(),C(o,1,1,Et),Me(),o=vt(_),o.c(),S(o,1),o.m(n.parentNode,n)):o.p(_,a),_[6]?u?(u.p(_,a),a&64&&S(u,1)):(u=pt(_),u.c(),S(u,1),u.m(t,l)):u&&(Pe(),C(u,1,1,()=>{u=null}),Me()),_[5]?s?(s.p(_,a),a&32&&S(s,1)):(s=wt(_),s.c(),S(s,1),s.m(t,null)):s&&(Pe(),C(s,1,1,()=>{s=null}),Me())},i(_){r||(S(o),S(u),S(s),r=!0)},o(_){C(o),C(u),C(s),r=!1},d(_){_&&(Ae(n),Ae(t)),o.d(_),u&&u.d(),s&&s.d()}}}function zn(i){let e,n;return e=new Vt({props:{unpadded_box:!0,size:"large",$$slots:{default:[Gn]},$$scope:{ctx:i}}}),{c(){se(e.$$.fragment)},m(t,l){ue(e,t,l),n=!0},p(t,l){const r={};l&1048576&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function vt(i){let e,n;return e=new Bn({props:{src:i[0].url,subtitle:i[1]?.url,autoplay:i[4],mirror:!1,label:i[2],interactive:!1,upload:i[8]}}),e.$on("play",i[9]),e.$on("pause",i[10]),e.$on("stop",i[11]),e.$on("end",i[12]),e.$on("load",i[13]),{c(){se(e.$$.fragment)},m(t,l){ue(e,t,l),n=!0},p(t,l){const r={};l&1&&(r.src=t[0].url),l&2&&(r.subtitle=t[1]?.url),l&16&&(r.autoplay=t[4]),l&4&&(r.label=t[2]),l&256&&(r.upload=t[8]),e.$set(r)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function pt(i){let e,n;return e=new Rt({props:{href:i[0].url,download:i[0].orig_name||i[0].path,$$slots:{default:[Wn]},$$scope:{ctx:i}}}),{c(){se(e.$$.fragment)},m(t,l){ue(e,t,l),n=!0},p(t,l){const r={};l&1&&(r.href=t[0].url),l&1&&(r.download=t[0].orig_name||t[0].path),l&1048576&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function Wn(i){let e,n;return e=new $t({props:{Icon:qt,label:"Download"}}),{c(){se(e.$$.fragment)},m(t,l){ue(e,t,l),n=!0},p:Et,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function wt(i){let e,n;return e=new Dt({props:{i18n:i[7],value:i[0],formatter:i[14]}}),e.$on("error",i[15]),e.$on("share",i[16]),{c(){se(e.$$.fragment)},m(t,l){ue(e,t,l),n=!0},p(t,l){const r={};l&128&&(r.i18n=t[7]),l&1&&(r.value=t[0]),e.$set(r)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function Gn(i){let e,n;return e=new kt({}),{c(){se(e.$$.fragment)},m(t,l){ue(e,t,l),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function Jn(i){let e,n,t,l,r,o;e=new St({props:{show_label:i[3],Icon:kt,label:i[2]||"Video"}});const u=[zn,On],s=[];function _(a,h){return a[0]===null||a[0].url===void 0?0:1}return t=_(i),l=s[t]=u[t](i),{c(){se(e.$$.fragment),n=Ke(),l.c(),r=In()},m(a,h){ue(e,a,h),He(a,n,h),s[t].m(a,h),He(a,r,h),o=!0},p(a,[h]){const m={};h&8&&(m.show_label=a[3]),h&4&&(m.label=a[2]||"Video"),e.$set(m);let d=t;t=_(a),t===d?s[t].p(a,h):(Pe(),C(s[d],1,1,()=>{s[d]=null}),Me(),l=s[t],l?l.p(a,h):(l=s[t]=u[t](a),l.c()),S(l,1),l.m(r.parentNode,r))},i(a){o||(S(e.$$.fragment,a),S(l),o=!0)},o(a){C(e.$$.fragment,a),C(l),o=!1},d(a){a&&(Ae(n),Ae(r)),ae(e,a),s[t].d(a)}}}function Kn(i,e,n){let{value:t=null}=e,{subtitle:l=null}=e,{label:r=void 0}=e,{show_label:o=!0}=e,{autoplay:u}=e,{show_share_button:s=!0}=e,{show_download_button:_=!0}=e,{i18n:a}=e,{upload:h}=e,m=null,d=null;const c=Un();jn(async()=>{t!==m&&l!==d&&d!==null&&(m=t,n(0,t=null),await Fn(),n(0,t=m)),m=t,d=l});function g(b){oe.call(this,i,b)}function w(b){oe.call(this,i,b)}function k(b){oe.call(this,i,b)}function B(b){oe.call(this,i,b)}function A(b){oe.call(this,i,b)}const H=async b=>b?await Ct(b.data):"";function X(b){oe.call(this,i,b)}function f(b){oe.call(this,i,b)}return i.$$set=b=>{"value"in b&&n(0,t=b.value),"subtitle"in b&&n(1,l=b.subtitle),"label"in b&&n(2,r=b.label),"show_label"in b&&n(3,o=b.show_label),"autoplay"in b&&n(4,u=b.autoplay),"show_share_button"in b&&n(5,s=b.show_share_button),"show_download_button"in b&&n(6,_=b.show_download_button),"i18n"in b&&n(7,a=b.i18n),"upload"in b&&n(8,h=b.upload)},i.$$.update=()=>{i.$$.dirty&1&&t&&c("change",t)},[t,l,r,o,u,s,_,a,h,g,w,k,B,A,H,X,f]}class Qn extends An{constructor(e){super(),Nn(this,e,Kn,Jn,Tt,{value:0,subtitle:1,label:2,show_label:3,autoplay:4,show_share_button:5,show_download_button:6,i18n:7,upload:8})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Q()}get subtitle(){return this.$$.ctx[1]}set subtitle(e){this.$$set({subtitle:e}),Q()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),Q()}get show_label(){return this.$$.ctx[3]}set show_label(e){this.$$set({show_label:e}),Q()}get autoplay(){return this.$$.ctx[4]}set autoplay(e){this.$$set({autoplay:e}),Q()}get show_share_button(){return this.$$.ctx[5]}set show_share_button(e){this.$$set({show_share_button:e}),Q()}get show_download_button(){return this.$$.ctx[6]}set show_download_button(e){this.$$set({show_download_button:e}),Q()}get i18n(){return this.$$.ctx[7]}set i18n(e){this.$$set({i18n:e}),Q()}get upload(){return this.$$.ctx[8]}set upload(e){this.$$set({upload:e}),Q()}}const ui=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"}));export{Bn as P,Qn as V,ui as a};
//# sourceMappingURL=VideoPreview-Dxlv2ku7.js.map
