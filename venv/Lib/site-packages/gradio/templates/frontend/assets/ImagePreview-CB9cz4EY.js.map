{"version":3,"file":"ImagePreview-CB9cz4EY.js","sources":["../../../../js/image/shared/ImagePreview.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport type { SelectData } from \"@gradio/utils\";\n\timport { uploadToHuggingFace } from \"@gradio/utils\";\n\timport { BlockLabel, Empty, IconButton, ShareButton } from \"@gradio/atoms\";\n\timport { Download } from \"@gradio/icons\";\n\timport { get_coordinates_of_clicked_image } from \"./utils\";\n\timport Image from \"./Image.svelte\";\n\timport { DownloadLink } from \"@gradio/wasm/svelte\";\n\n\timport { Image as ImageIcon } from \"@gradio/icons\";\n\timport { type FileData } from \"@gradio/client\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\n\texport let value: null | FileData;\n\texport let label: string | undefined = undefined;\n\texport let show_label: boolean;\n\texport let show_download_button = true;\n\texport let selectable = false;\n\texport let show_share_button = false;\n\texport let i18n: I18nFormatter;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: string;\n\t\tselect: SelectData;\n\t}>();\n\n\tconst handle_click = (evt: MouseEvent): void => {\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\n\t\tif (coordinates) {\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\n\t\t}\n\t};\n</script>\n\n<BlockLabel\n\t{show_label}\n\tIcon={ImageIcon}\n\tlabel={!show_label ? \"\" : label || i18n(\"image.image\")}\n/>\n{#if value === null || !value.url}\n\t<Empty unpadded_box={true} size=\"large\"><ImageIcon /></Empty>\n{:else}\n\t<div class=\"icon-buttons\">\n\t\t{#if show_download_button}\n\t\t\t<DownloadLink href={value.url} download={value.orig_name || \"image\"}>\n\t\t\t\t<IconButton Icon={Download} label={i18n(\"common.download\")} />\n\t\t\t</DownloadLink>\n\t\t{/if}\n\t\t{#if show_share_button}\n\t\t\t<ShareButton\n\t\t\t\t{i18n}\n\t\t\t\ton:share\n\t\t\t\ton:error\n\t\t\t\tformatter={async (value) => {\n\t\t\t\t\tif (!value) return \"\";\n\t\t\t\t\tlet url = await uploadToHuggingFace(value, \"url\");\n\t\t\t\t\treturn `<img src=\"${url}\" />`;\n\t\t\t\t}}\n\t\t\t\t{value}\n\t\t\t/>\n\t\t{/if}\n\t</div>\n\t<button on:click={handle_click}>\n\t\t<div class:selectable class=\"image-container\">\n\t\t\t<Image src={value.url} alt=\"\" loading=\"lazy\" on:load />\n\t\t</div>\n\t</button>\n{/if}\n\n<style>\n\t.image-container :global(img),\n\tbutton {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: contain;\n\t\tdisplay: block;\n\t\tborder-radius: var(--radius-lg);\n\t}\n\n\t.selectable {\n\t\tcursor: crosshair;\n\t}\n\n\t.icon-buttons {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: 6px;\n\t\tright: 6px;\n\t\tgap: var(--size-1);\n\t}\n</style>\n"],"names":["createEventDispatcher","ctx","create_if_block_2","create_if_block_1","insert","target","div0","anchor","button","append","div1","dirty","image_changes","downloadlink_changes","Download","iconbutton_changes","ImageIcon","value","$$props","label","show_label","show_download_button","selectable","show_share_button","i18n","dispatch","handle_click","evt","coordinates","get_coordinates_of_clicked_image","uploadToHuggingFace"],"mappings":"04BACU,CAAA,sBAAAA,CAAA,SAAqC,iEA2CxCC,EAAoB,CAAA,GAAAC,EAAAD,CAAA,IAKpBA,EAAiB,CAAA,GAAAE,EAAAF,CAAA,yBAgBT,IAAAA,KAAM,+RAtBpBG,EAmBKC,EAAAC,EAAAC,CAAA,gDACLH,EAIQC,EAAAG,EAAAD,CAAA,EAHPE,EAEKD,EAAAE,CAAA,qCAHYT,EAAY,CAAA,CAAA,gBAnBxBA,EAAoB,CAAA,6FAKpBA,EAAiB,CAAA,4GAgBTU,EAAA,IAAAC,EAAA,IAAAX,KAAM,6PAxBC,oSAIC,KAAAA,KAAM,aAAeA,EAAK,CAAA,EAAC,WAAa,iHAAxCU,EAAA,IAAAE,EAAA,KAAAZ,KAAM,sBAAeA,EAAK,CAAA,EAAC,WAAa,0LACzCa,EAAiB,MAAAb,KAAK,iBAAiB,oEAAtBU,EAAA,KAAAI,EAAA,MAAAd,KAAK,iBAAiB,qoBATtDe,QACEf,EAAU,CAAA,EAAQA,EAAK,CAAA,GAAIA,EAAI,CAAA,EAAC,aAAa,EAAhC,yCAEjB,OAAAA,EAAU,CAAA,IAAA,MAAS,CAAAA,KAAM,IAAG,0LAFxBA,EAAU,CAAA,EAAQA,EAAK,CAAA,GAAIA,EAAI,CAAA,EAAC,aAAa,EAAhC,mSAxBV,MAAAgB,CAAsB,EAAAC,EACtB,CAAA,MAAAC,EAA4B,MAAS,EAAAD,GACrC,WAAAE,CAAmB,EAAAF,EACnB,CAAA,qBAAAG,EAAuB,EAAI,EAAAH,EAC3B,CAAA,WAAAI,EAAa,EAAK,EAAAJ,EAClB,CAAA,kBAAAK,EAAoB,EAAK,EAAAL,GACzB,KAAAM,CAAmB,EAAAN,EAExB,MAAAO,EAAWzB,IAKX0B,EAAgBC,GAAe,KAChCC,EAAcC,EAAiCF,CAAG,EAClDC,GACHH,EAAS,SAAY,CAAA,MAAOG,EAAa,MAAO,IAAI,CAAA,WAwBjCX,GACZA,eACW,MAAAa,EAAoBb,CAAY,CACzB,OAFJ"}